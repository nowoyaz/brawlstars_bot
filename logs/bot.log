2025-03-20 18:50:03,321 - __main__ - INFO - Запуск бота...
2025-03-20 18:50:03,715 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:03,715 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-20 18:50:03,715 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,717 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("referrals")
2025-03-20 18:50:03,717 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,717 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("announcements")
2025-03-20 18:50:03,718 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,718 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("reports")
2025-03-20 18:50:03,719 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,719 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("favorites")
2025-03-20 18:50:03,719 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,720 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("crystal_transactions")
2025-03-20 18:50:03,720 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,721 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("premium_prices")
2025-03-20 18:50:03,721 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,721 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sponsors")
2025-03-20 18:50:03,722 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,722 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_sponsor_subscriptions")
2025-03-20 18:50:03,722 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,722 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_codes")
2025-03-20 18:50:03,723 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,723 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_uses")
2025-03-20 18:50:03,723 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,723 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("achievements")
2025-03-20 18:50:03,724 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,724 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_achievements")
2025-03-20 18:50:03,724 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,724 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_visited_sections")
2025-03-20 18:50:03,725 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,725 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_secret_purchases")
2025-03-20 18:50:03,725 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,725 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("bot_settings")
2025-03-20 18:50:03,725 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:03,726 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:03,753 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:03,759 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:03,759 - sqlalchemy.engine.Engine - INFO - [generated in 0.00052s] (30, 1, 0)
2025-03-20 18:50:03,762 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:03,762 - sqlalchemy.engine.Engine - INFO - [cached since 0.003462s ago] (180, 1, 0)
2025-03-20 18:50:03,764 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:03,765 - sqlalchemy.engine.Engine - INFO - [cached since 0.006176s ago] (365, 1, 0)
2025-03-20 18:50:03,765 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:03,766 - sqlalchemy.engine.Engine - INFO - [cached since 0.007239s ago] (36500, 1, 0)
2025-03-20 18:50:03,766 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:03,786 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:03,789 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM achievements) AS anon_1
2025-03-20 18:50:03,790 - sqlalchemy.engine.Engine - INFO - [generated in 0.00120s] ()
2025-03-20 18:50:03,790 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:03,792 - root - INFO - Achievements handlers registered successfully
2025-03-20 18:50:03,929 - aiogram - INFO - Bot: Бубсер Поиск Бот [@Bubser_PoiskBot]
2025-03-20 18:50:04,005 - aiogram - WARNING - Updates were skipped successfully.
2025-03-20 18:50:04,006 - __main__ - INFO - Бот успешно запущен!
2025-03-20 18:50:04,006 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-03-20 18:50:04,022 - aiogram - WARNING - Goodbye!
2025-03-20 18:50:09,175 - __main__ - INFO - Запуск бота...
2025-03-20 18:50:09,446 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:09,446 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-20 18:50:09,446 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,446 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2025-03-20 18:50:09,447 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,447 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("referrals")
2025-03-20 18:50:09,447 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,448 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("referrals")
2025-03-20 18:50:09,448 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,449 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("announcements")
2025-03-20 18:50:09,449 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,449 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("announcements")
2025-03-20 18:50:09,450 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,450 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("reports")
2025-03-20 18:50:09,450 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,450 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("reports")
2025-03-20 18:50:09,450 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,451 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("favorites")
2025-03-20 18:50:09,451 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,451 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("favorites")
2025-03-20 18:50:09,451 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,451 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("crystal_transactions")
2025-03-20 18:50:09,451 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,452 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("crystal_transactions")
2025-03-20 18:50:09,452 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,452 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("premium_prices")
2025-03-20 18:50:09,452 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,452 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("premium_prices")
2025-03-20 18:50:09,453 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,453 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sponsors")
2025-03-20 18:50:09,453 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,453 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("sponsors")
2025-03-20 18:50:09,453 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,453 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_sponsor_subscriptions")
2025-03-20 18:50:09,453 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,453 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_sponsor_subscriptions")
2025-03-20 18:50:09,455 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,455 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_codes")
2025-03-20 18:50:09,455 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,456 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("promo_codes")
2025-03-20 18:50:09,456 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,456 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_uses")
2025-03-20 18:50:09,456 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,456 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("promo_uses")
2025-03-20 18:50:09,456 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,457 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("achievements")
2025-03-20 18:50:09,457 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,457 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("achievements")
2025-03-20 18:50:09,457 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,457 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_achievements")
2025-03-20 18:50:09,457 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,458 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_achievements")
2025-03-20 18:50:09,458 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,458 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_visited_sections")
2025-03-20 18:50:09,458 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,458 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_visited_sections")
2025-03-20 18:50:09,459 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,459 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_secret_purchases")
2025-03-20 18:50:09,459 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,459 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_secret_purchases")
2025-03-20 18:50:09,459 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,459 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("bot_settings")
2025-03-20 18:50:09,460 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,460 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("bot_settings")
2025-03-20 18:50:09,460 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:50:09,461 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	tg_id INTEGER NOT NULL, 
	username VARCHAR, 
	first_name VARCHAR, 
	is_premium BOOLEAN, 
	premium_end_date DATETIME, 
	crystals INTEGER, 
	language VARCHAR, 
	blocked BOOLEAN, 
	last_gift DATETIME, 
	created_at DATETIME, 
	updated_at DATETIME, 
	coins INTEGER, 
	premium_until DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (tg_id)
)


2025-03-20 18:50:09,462 - sqlalchemy.engine.Engine - INFO - [no key 0.00088s] ()
2025-03-20 18:50:09,467 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_id ON users (id)
2025-03-20 18:50:09,467 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] ()
2025-03-20 18:50:09,470 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE referrals (
	id INTEGER NOT NULL, 
	referrer_id INTEGER NOT NULL, 
	referred_id INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (referred_id)
)


2025-03-20 18:50:09,471 - sqlalchemy.engine.Engine - INFO - [no key 0.00079s] ()
2025-03-20 18:50:09,473 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_referrals_id ON referrals (id)
2025-03-20 18:50:09,473 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] ()
2025-03-20 18:50:09,477 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE premium_prices (
	id INTEGER NOT NULL, 
	duration_days INTEGER NOT NULL, 
	price FLOAT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (duration_days)
)


2025-03-20 18:50:09,477 - sqlalchemy.engine.Engine - INFO - [no key 0.00042s] ()
2025-03-20 18:50:09,480 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_premium_prices_id ON premium_prices (id)
2025-03-20 18:50:09,480 - sqlalchemy.engine.Engine - INFO - [no key 0.00028s] ()
2025-03-20 18:50:09,483 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE sponsors (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	link VARCHAR NOT NULL, 
	channel_id VARCHAR, 
	reward INTEGER, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id)
)


2025-03-20 18:50:09,483 - sqlalchemy.engine.Engine - INFO - [no key 0.00050s] ()
2025-03-20 18:50:09,487 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_sponsors_id ON sponsors (id)
2025-03-20 18:50:09,487 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] ()
2025-03-20 18:50:09,491 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE promo_codes (
	id INTEGER NOT NULL, 
	code VARCHAR NOT NULL, 
	duration_days INTEGER NOT NULL, 
	max_uses INTEGER, 
	uses_count INTEGER, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	expires_at DATETIME, 
	PRIMARY KEY (id)
)


2025-03-20 18:50:09,491 - sqlalchemy.engine.Engine - INFO - [no key 0.00047s] ()
2025-03-20 18:50:09,495 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_promo_codes_id ON promo_codes (id)
2025-03-20 18:50:09,495 - sqlalchemy.engine.Engine - INFO - [no key 0.00020s] ()
2025-03-20 18:50:09,498 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_promo_codes_code ON promo_codes (code)
2025-03-20 18:50:09,498 - sqlalchemy.engine.Engine - INFO - [no key 0.00062s] ()
2025-03-20 18:50:09,500 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE achievements (
	id INTEGER NOT NULL, 
	"key" VARCHAR NOT NULL, 
	name VARCHAR NOT NULL, 
	description VARCHAR NOT NULL, 
	icon VARCHAR, 
	is_purchasable BOOLEAN, 
	price INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE ("key")
)


2025-03-20 18:50:09,501 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2025-03-20 18:50:09,503 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_achievements_id ON achievements (id)
2025-03-20 18:50:09,504 - sqlalchemy.engine.Engine - INFO - [no key 0.00061s] ()
2025-03-20 18:50:09,507 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE bot_settings (
	id INTEGER NOT NULL, 
	"key" VARCHAR NOT NULL, 
	value VARCHAR, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE ("key")
)


2025-03-20 18:50:09,507 - sqlalchemy.engine.Engine - INFO - [no key 0.00034s] ()
2025-03-20 18:50:09,510 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE announcements (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	announcement_type VARCHAR(4) NOT NULL, 
	image_id VARCHAR NOT NULL, 
	media_id VARCHAR, 
	media_type VARCHAR, 
	description TEXT NOT NULL, 
	keyword VARCHAR, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:50:09,510 - sqlalchemy.engine.Engine - INFO - [no key 0.00046s] ()
2025-03-20 18:50:09,513 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_announcements_id ON announcements (id)
2025-03-20 18:50:09,514 - sqlalchemy.engine.Engine - INFO - [no key 0.00075s] ()
2025-03-20 18:50:09,516 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE crystal_transactions (
	id INTEGER NOT NULL, 
	sender_id INTEGER, 
	receiver_id INTEGER, 
	amount INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(sender_id) REFERENCES users (id), 
	FOREIGN KEY(receiver_id) REFERENCES users (id)
)


2025-03-20 18:50:09,516 - sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
2025-03-20 18:50:09,519 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_crystal_transactions_id ON crystal_transactions (id)
2025-03-20 18:50:09,519 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] ()
2025-03-20 18:50:09,521 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_sponsor_subscriptions (
	id INTEGER NOT NULL, 
	user_tg_id INTEGER NOT NULL, 
	sponsor_id INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_tg_id) REFERENCES users (tg_id), 
	FOREIGN KEY(sponsor_id) REFERENCES sponsors (id)
)


2025-03-20 18:50:09,522 - sqlalchemy.engine.Engine - INFO - [no key 0.00032s] ()
2025-03-20 18:50:09,524 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE promo_uses (
	id INTEGER NOT NULL, 
	promo_id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	used_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(promo_id) REFERENCES promo_codes (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:50:09,526 - sqlalchemy.engine.Engine - INFO - [no key 0.00053s] ()
2025-03-20 18:50:09,528 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_promo_uses_id ON promo_uses (id)
2025-03-20 18:50:09,528 - sqlalchemy.engine.Engine - INFO - [no key 0.00031s] ()
2025-03-20 18:50:09,531 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_achievements (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	achievement_id INTEGER NOT NULL, 
	achieved_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	FOREIGN KEY(achievement_id) REFERENCES achievements (id)
)


2025-03-20 18:50:09,532 - sqlalchemy.engine.Engine - INFO - [no key 0.00056s] ()
2025-03-20 18:50:09,535 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_achievements_id ON user_achievements (id)
2025-03-20 18:50:09,535 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] ()
2025-03-20 18:50:09,538 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_visited_sections (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	section VARCHAR NOT NULL, 
	visited_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:50:09,539 - sqlalchemy.engine.Engine - INFO - [no key 0.00055s] ()
2025-03-20 18:50:09,542 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_visited_sections_id ON user_visited_sections (id)
2025-03-20 18:50:09,542 - sqlalchemy.engine.Engine - INFO - [no key 0.00032s] ()
2025-03-20 18:50:09,547 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_secret_purchases (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	content_key VARCHAR NOT NULL, 
	purchased_at DATETIME, 
	price INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:50:09,547 - sqlalchemy.engine.Engine - INFO - [no key 0.00046s] ()
2025-03-20 18:50:09,550 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_secret_purchases_id ON user_secret_purchases (id)
2025-03-20 18:50:09,550 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] ()
2025-03-20 18:50:09,553 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reports (
	id INTEGER NOT NULL, 
	reporter_id INTEGER, 
	announcement_id INTEGER, 
	reason VARCHAR NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(reporter_id) REFERENCES users (id), 
	FOREIGN KEY(announcement_id) REFERENCES announcements (id)
)


2025-03-20 18:50:09,554 - sqlalchemy.engine.Engine - INFO - [no key 0.00117s] ()
2025-03-20 18:50:09,558 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_reports_id ON reports (id)
2025-03-20 18:50:09,558 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] ()
2025-03-20 18:50:09,562 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE favorites (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	announcement_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	FOREIGN KEY(announcement_id) REFERENCES announcements (id)
)


2025-03-20 18:50:09,563 - sqlalchemy.engine.Engine - INFO - [no key 0.00054s] ()
2025-03-20 18:50:09,565 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_favorites_id ON favorites (id)
2025-03-20 18:50:09,565 - sqlalchemy.engine.Engine - INFO - [no key 0.00025s] ()
2025-03-20 18:50:09,567 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:09,585 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:09,589 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:09,589 - sqlalchemy.engine.Engine - INFO - [generated in 0.00047s] (30, 1, 0)
2025-03-20 18:50:09,591 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:09,591 - sqlalchemy.engine.Engine - INFO - [cached since 0.001681s ago] (180, 1, 0)
2025-03-20 18:50:09,592 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:09,592 - sqlalchemy.engine.Engine - INFO - [cached since 0.002655s ago] (365, 1, 0)
2025-03-20 18:50:09,593 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:09,593 - sqlalchemy.engine.Engine - INFO - [cached since 0.003537s ago] (36500, 1, 0)
2025-03-20 18:50:09,596 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,597 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s (insertmanyvalues) 1/4 (ordered; batch not supported)] (30, 500.0, '2025-03-20 16:50:09.596634', '2025-03-20 16:50:09.596634')
2025-03-20 18:50:09,598 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,598 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (180, 2500.0, '2025-03-20 16:50:09.596634', '2025-03-20 16:50:09.596634')
2025-03-20 18:50:09,599 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,599 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (365, 4500.0, '2025-03-20 16:50:09.596634', '2025-03-20 16:50:09.596634')
2025-03-20 18:50:09,599 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,599 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (36500, 9900.0, '2025-03-20 16:50:09.596634', '2025-03-20 16:50:09.596634')
2025-03-20 18:50:09,600 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:09,618 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:09,623 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM achievements) AS anon_1
2025-03-20 18:50:09,623 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ()
2025-03-20 18:50:09,625 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:50:09,625 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ('major', 'Мажор', 'Доказательство вашей финансовой состоятельности', '💰', 1, 10000, '2025-03-20 16:50:09.625203')
2025-03-20 18:50:09,626 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,626 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s (insertmanyvalues) 1/9 (ordered; batch not supported)] ('popular', 'Популярный', 'Добавить объявление по поиску команды', '👥', 0, 0, '2025-03-20 16:50:09.626545')
2025-03-20 18:50:09,627 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,627 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/9 (ordered; batch not supported)] ('club_fighter', 'Бойцовский клуб', 'Добавить объявление по поиску клуба', '🥊', 0, 0, '2025-03-20 16:50:09.626545')
2025-03-20 18:50:09,628 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,628 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/9 (ordered; batch not supported)] ('explorer', 'Искатель', 'Посетить все разделы бота', '🔍', 0, 0, '2025-03-20 16:50:09.626545')
2025-03-20 18:50:09,628 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,628 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/9 (ordered; batch not supported)] ('legend', 'Легенда', 'Купить премиум статус', '⭐', 0, 0, '2025-03-20 16:50:09.626545')
2025-03-20 18:50:09,629 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,629 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 5/9 (ordered; batch not supported)] ('leprechaun', 'Лепрекон', 'Накопить 15,000 монет в балансе', '🍀', 0, 0, '2025-03-20 16:50:09.626545')
2025-03-20 18:50:09,629 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,629 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 6/9 (ordered; batch not supported)] ('lucky', 'Испытать удачу', 'Принять участие в розыгрыше монет', '🎁', 0, 0, '2025-03-20 16:50:09.626545')
2025-03-20 18:50:09,630 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,631 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 7/9 (ordered; batch not supported)] ('business', 'Бизнес-мачо', 'Пригласить человека по реферальной ссылке', '💼', 0, 0, '2025-03-20 16:50:09.626545')
2025-03-20 18:50:09,631 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,631 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 8/9 (ordered; batch not supported)] ('follow_me', 'Делай как я', 'Пригласить 10 человек по реферальной ссылке', '👑', 0, 0, '2025-03-20 16:50:09.626545')
2025-03-20 18:50:09,632 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:50:09,632 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 9/9 (ordered; batch not supported)] ('friend', 'Настоящий друг', 'Пригласить 25 человек по реферальной ссылке', '❤️', 0, 0, '2025-03-20 16:50:09.626545')
2025-03-20 18:50:09,633 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:09,639 - root - INFO - Achievements handlers registered successfully
2025-03-20 18:50:09,771 - aiogram - INFO - Bot: Бубсер Поиск Бот [@Bubser_PoiskBot]
2025-03-20 18:50:09,853 - aiogram - WARNING - Updates were skipped successfully.
2025-03-20 18:50:09,853 - __main__ - INFO - Бот успешно запущен!
2025-03-20 18:50:09,854 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-03-20 18:50:14,550 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:14,552 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:14,553 - sqlalchemy.engine.Engine - INFO - [generated in 0.00117s] (7139312538, 1, 0)
2025-03-20 18:50:14,556 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:14,557 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:14,558 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:14,558 - sqlalchemy.engine.Engine - INFO - [cached since 0.005558s ago] (7139312538, 1, 0)
2025-03-20 18:50:14,559 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:14,559 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:14,561 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:14,561 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] (7139312538, 1, 0)
2025-03-20 18:50:14,561 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:14,563 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:14,563 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:14,563 - sqlalchemy.engine.Engine - INFO - [cached since 0.002714s ago] (7139312538, 1, 0)
2025-03-20 18:50:14,564 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:16,293 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:16,293 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:16,293 - sqlalchemy.engine.Engine - INFO - [cached since 1.742s ago] (7139312538, 1, 0)
2025-03-20 18:50:16,295 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:16,298 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:16,299 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:16,299 - sqlalchemy.engine.Engine - INFO - [cached since 1.747s ago] (7139312538, 1, 0)
2025-03-20 18:50:16,300 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:16,301 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:16,301 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:16,302 - sqlalchemy.engine.Engine - INFO - [cached since 1.741s ago] (7139312538, 1, 0)
2025-03-20 18:50:16,305 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:16,353 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:16,354 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:16,354 - sqlalchemy.engine.Engine - INFO - [cached since 1.794s ago] (7139312538, 1, 0)
2025-03-20 18:50:16,357 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:16,410 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:16,411 - sqlalchemy.engine.Engine - INFO - SELECT sponsors.id AS sponsors_id, sponsors.name AS sponsors_name, sponsors.link AS sponsors_link, sponsors.channel_id AS sponsors_channel_id, sponsors.reward AS sponsors_reward, sponsors.is_active AS sponsors_is_active, sponsors.created_at AS sponsors_created_at, sponsors.updated_at AS sponsors_updated_at 
FROM sponsors
2025-03-20 18:50:16,412 - sqlalchemy.engine.Engine - INFO - [generated in 0.00037s] ()
2025-03-20 18:50:16,413 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:17,142 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:17,142 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:17,143 - sqlalchemy.engine.Engine - INFO - [cached since 2.591s ago] (7139312538, 1, 0)
2025-03-20 18:50:17,145 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:17,146 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:17,147 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:17,147 - sqlalchemy.engine.Engine - INFO - [cached since 2.595s ago] (7139312538, 1, 0)
2025-03-20 18:50:17,150 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:17,151 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:17,151 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:17,152 - sqlalchemy.engine.Engine - INFO - [cached since 2.591s ago] (7139312538, 1, 0)
2025-03-20 18:50:17,153 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:24,048 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:24,049 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:24,050 - sqlalchemy.engine.Engine - INFO - [cached since 9.498s ago] (7139312538, 1, 0)
2025-03-20 18:50:24,051 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:24,052 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:24,053 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:24,054 - sqlalchemy.engine.Engine - INFO - [cached since 9.502s ago] (7139312538, 1, 0)
2025-03-20 18:50:24,054 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:24,054 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:24,056 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:24,056 - sqlalchemy.engine.Engine - INFO - [cached since 9.495s ago] (7139312538, 1, 0)
2025-03-20 18:50:24,056 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:24,057 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:24,057 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:24,057 - sqlalchemy.engine.Engine - INFO - [cached since 9.497s ago] (7139312538, 1, 0)
2025-03-20 18:50:24,058 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:25,206 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:25,206 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:25,206 - sqlalchemy.engine.Engine - INFO - [cached since 10.65s ago] (7139312538, 1, 0)
2025-03-20 18:50:25,209 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:25,210 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:25,211 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:25,211 - sqlalchemy.engine.Engine - INFO - [cached since 10.66s ago] (7139312538, 1, 0)
2025-03-20 18:50:25,212 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:25,213 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:25,213 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:25,214 - sqlalchemy.engine.Engine - INFO - [cached since 10.65s ago] (7139312538, 1, 0)
2025-03-20 18:50:25,214 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:25,215 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:25,215 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:25,215 - sqlalchemy.engine.Engine - INFO - [cached since 10.65s ago] (7139312538, 1, 0)
2025-03-20 18:50:25,216 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:30,311 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:30,311 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:30,311 - sqlalchemy.engine.Engine - INFO - [cached since 15.76s ago] (7139312538, 1, 0)
2025-03-20 18:50:30,312 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:30,314 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:30,315 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:30,315 - sqlalchemy.engine.Engine - INFO - [cached since 15.76s ago] (7139312538, 1, 0)
2025-03-20 18:50:30,316 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:30,317 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:30,317 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:30,317 - sqlalchemy.engine.Engine - INFO - [cached since 15.76s ago] (7139312538, 1, 0)
2025-03-20 18:50:30,318 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:30,318 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:30,318 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:30,319 - sqlalchemy.engine.Engine - INFO - [cached since 15.76s ago] (7139312538, 1, 0)
2025-03-20 18:50:30,320 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:31,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:31,765 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:31,765 - sqlalchemy.engine.Engine - INFO - [cached since 17.21s ago] (7139312538, 1, 0)
2025-03-20 18:50:31,766 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:31,767 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:31,768 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:31,769 - sqlalchemy.engine.Engine - INFO - [cached since 17.22s ago] (7139312538, 1, 0)
2025-03-20 18:50:31,769 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:31,769 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:31,769 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:31,770 - sqlalchemy.engine.Engine - INFO - [cached since 17.21s ago] (7139312538, 1, 0)
2025-03-20 18:50:31,770 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:31,770 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:31,771 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:31,771 - sqlalchemy.engine.Engine - INFO - [cached since 17.21s ago] (7139312538, 1, 0)
2025-03-20 18:50:31,771 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:31,772 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:31,773 - sqlalchemy.engine.Engine - INFO - INSERT INTO sponsors (name, link, channel_id, reward, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:50:31,773 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] ('test', 'https://t.me/obrientest1', '-1002294041672', 10, 1, '2025-03-20 16:50:31.773751', '2025-03-20 16:50:31.773751')
2025-03-20 18:50:31,776 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:31,877 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:31,878 - sqlalchemy.engine.Engine - INFO - SELECT sponsors.id AS sponsors_id, sponsors.name AS sponsors_name, sponsors.link AS sponsors_link, sponsors.channel_id AS sponsors_channel_id, sponsors.reward AS sponsors_reward, sponsors.is_active AS sponsors_is_active, sponsors.created_at AS sponsors_created_at, sponsors.updated_at AS sponsors_updated_at 
FROM sponsors
2025-03-20 18:50:31,878 - sqlalchemy.engine.Engine - INFO - [cached since 15.47s ago] ()
2025-03-20 18:50:31,880 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:34,192 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:34,192 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:34,192 - sqlalchemy.engine.Engine - INFO - [cached since 19.64s ago] (7139312538, 1, 0)
2025-03-20 18:50:34,193 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:34,193 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:34,195 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:34,195 - sqlalchemy.engine.Engine - INFO - [cached since 19.64s ago] (7139312538, 1, 0)
2025-03-20 18:50:34,196 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:34,197 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:34,197 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:34,198 - sqlalchemy.engine.Engine - INFO - [cached since 19.64s ago] (7139312538, 1, 0)
2025-03-20 18:50:34,199 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:34,199 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:34,200 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:34,200 - sqlalchemy.engine.Engine - INFO - [cached since 19.64s ago] (7139312538, 1, 0)
2025-03-20 18:50:34,201 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:34,201 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:34,201 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:34,202 - sqlalchemy.engine.Engine - INFO - [cached since 19.64s ago] (7139312538, 1, 0)
2025-03-20 18:50:34,202 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:34,202 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:34,203 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:34,203 - sqlalchemy.engine.Engine - INFO - [cached since 19.64s ago] (7139312538, 1, 0)
2025-03-20 18:50:34,203 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:34,203 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:34,203 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:34,203 - sqlalchemy.engine.Engine - INFO - [cached since 19.64s ago] (7139312538, 1, 0)
2025-03-20 18:50:34,205 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (tg_id, username, first_name, is_premium, premium_end_date, crystals, language, blocked, last_gift, created_at, updated_at, coins, premium_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:50:34,205 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] (7139312538, 'nowoyaz', "O'Brien", 0, None, 100, 'ru', 0, None, '2025-03-20 18:50:34.204951', '2025-03-20 16:50:34.205989', 0, None)
2025-03-20 18:50:34,210 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:35,164 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:35,164 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:35,166 - sqlalchemy.engine.Engine - INFO - [cached since 20.61s ago] (7139312538, 1, 0)
2025-03-20 18:50:35,167 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:35,168 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:35,168 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:35,169 - sqlalchemy.engine.Engine - INFO - [cached since 20.62s ago] (7139312538, 1, 0)
2025-03-20 18:50:35,169 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:35,171 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:35,171 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:35,171 - sqlalchemy.engine.Engine - INFO - [cached since 20.61s ago] (7139312538, 1, 0)
2025-03-20 18:50:35,172 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:35,843 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:35,844 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:35,844 - sqlalchemy.engine.Engine - INFO - [cached since 21.29s ago] (7139312538, 1, 0)
2025-03-20 18:50:35,847 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:35,849 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:35,850 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:35,851 - sqlalchemy.engine.Engine - INFO - [cached since 21.3s ago] (7139312538, 1, 0)
2025-03-20 18:50:35,852 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:35,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:35,853 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:35,855 - sqlalchemy.engine.Engine - INFO - [cached since 21.29s ago] (7139312538, 1, 0)
2025-03-20 18:50:35,856 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:35,935 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:35,936 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:35,938 - sqlalchemy.engine.Engine - INFO - [cached since 21.38s ago] (7139312538, 1, 0)
2025-03-20 18:50:35,940 - sqlalchemy.engine.Engine - INFO - SELECT user_visited_sections.id AS user_visited_sections_id, user_visited_sections.user_id AS user_visited_sections_user_id, user_visited_sections.section AS user_visited_sections_section, user_visited_sections.visited_at AS user_visited_sections_visited_at 
FROM user_visited_sections 
WHERE user_visited_sections.user_id = ? AND user_visited_sections.section = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:35,942 - sqlalchemy.engine.Engine - INFO - [generated in 0.00181s] (1, 'gift', 1, 0)
2025-03-20 18:50:35,945 - sqlalchemy.engine.Engine - INFO - INSERT INTO user_visited_sections (user_id, section, visited_at) VALUES (?, ?, ?)
2025-03-20 18:50:35,946 - sqlalchemy.engine.Engine - INFO - [generated in 0.00137s] (1, 'gift', '2025-03-20 16:50:35.945620')
2025-03-20 18:50:35,951 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:35,956 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:35,959 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
2025-03-20 18:50:35,960 - sqlalchemy.engine.Engine - INFO - [generated in 0.00148s] (1,)
2025-03-20 18:50:35,965 - sqlalchemy.engine.Engine - INFO - SELECT user_visited_sections.section AS user_visited_sections_section 
FROM user_visited_sections 
WHERE user_visited_sections.user_id = ? AND user_visited_sections.section IN (?, ?, ?, ?, ?, ?)
2025-03-20 18:50:35,965 - sqlalchemy.engine.Engine - INFO - [generated in 0.00087s] (1, 'search_team_menu', 'search_club_menu', 'crystals', 'premium', 'additional', 'gift')
2025-03-20 18:50:35,966 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:36,528 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:36,529 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:36,529 - sqlalchemy.engine.Engine - INFO - [cached since 21.98s ago] (7139312538, 1, 0)
2025-03-20 18:50:36,530 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:36,531 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:36,532 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:36,533 - sqlalchemy.engine.Engine - INFO - [cached since 21.98s ago] (7139312538, 1, 0)
2025-03-20 18:50:36,533 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:36,533 - handlers.gift - INFO - Пользователь 7139312538 запросил подарок
2025-03-20 18:50:36,535 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:36,535 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:36,535 - sqlalchemy.engine.Engine - INFO - [cached since 21.97s ago] (7139312538, 1, 0)
2025-03-20 18:50:36,536 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:36,622 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:36,623 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:36,624 - sqlalchemy.engine.Engine - INFO - [cached since 22.06s ago] (7139312538, 1, 0)
2025-03-20 18:50:36,626 - handlers.gift - INFO - Пользователь 7139312538 премиум: <coroutine object is_user_premium at 0x000001D69B908310>
2025-03-20 18:50:36,628 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:36,630 - sqlalchemy.engine.Engine - INFO - SELECT sponsors.id AS sponsors_id, sponsors.name AS sponsors_name, sponsors.link AS sponsors_link, sponsors.channel_id AS sponsors_channel_id, sponsors.reward AS sponsors_reward, sponsors.is_active AS sponsors_is_active, sponsors.created_at AS sponsors_created_at, sponsors.updated_at AS sponsors_updated_at 
FROM sponsors 
WHERE sponsors.is_active = 1
2025-03-20 18:50:36,630 - sqlalchemy.engine.Engine - INFO - [generated in 0.00036s] ()
2025-03-20 18:50:36,631 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:36,631 - handlers.gift - INFO - Найдено активных спонсоров: 1
2025-03-20 18:50:36,631 - handlers.gift - INFO - Выдача подарка пользователю 7139312538: 32 монет
2025-03-20 18:50:36,632 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:36,633 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:36,633 - sqlalchemy.engine.Engine - INFO - [cached since 22.07s ago] (7139312538, 1, 0)
2025-03-20 18:50:36,637 - sqlalchemy.engine.Engine - INFO - UPDATE users SET last_gift=?, updated_at=? WHERE users.id = ?
2025-03-20 18:50:36,637 - sqlalchemy.engine.Engine - INFO - [generated in 0.00109s] ('2025-03-20 18:50:36.633796', '2025-03-20 16:50:36.637401', 1)
2025-03-20 18:50:36,641 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:36,644 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:36,645 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:36,645 - sqlalchemy.engine.Engine - INFO - [cached since 22.08s ago] (7139312538, 1, 0)
2025-03-20 18:50:36,649 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, coins=? WHERE users.id = ?
2025-03-20 18:50:36,650 - sqlalchemy.engine.Engine - INFO - [generated in 0.00101s] ('2025-03-20 16:50:36.649454', 32, 1)
2025-03-20 18:50:36,652 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:36,656 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:36,657 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:36,657 - sqlalchemy.engine.Engine - INFO - [cached since 22.1s ago] (7139312538, 1, 0)
2025-03-20 18:50:36,660 - sqlalchemy.engine.Engine - INFO - SELECT achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM achievements 
WHERE achievements."key" = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:36,661 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('lucky', 1, 0)
2025-03-20 18:50:36,665 - sqlalchemy.engine.Engine - INFO - SELECT user_achievements.id AS user_achievements_id, user_achievements.user_id AS user_achievements_user_id, user_achievements.achievement_id AS user_achievements_achievement_id, user_achievements.achieved_at AS user_achievements_achieved_at 
FROM user_achievements 
WHERE user_achievements.user_id = ? AND user_achievements.achievement_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:36,666 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] (1, 7, 1, 0)
2025-03-20 18:50:36,668 - sqlalchemy.engine.Engine - INFO - INSERT INTO user_achievements (user_id, achievement_id, achieved_at) VALUES (?, ?, ?)
2025-03-20 18:50:36,669 - sqlalchemy.engine.Engine - INFO - [generated in 0.00148s] (1, 7, '2025-03-20 16:50:36.668349')
2025-03-20 18:50:36,672 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:50:36,779 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:47,473 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:47,473 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:47,474 - sqlalchemy.engine.Engine - INFO - [cached since 32.92s ago] (8053357241, 1, 0)
2025-03-20 18:50:47,474 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:47,475 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:47,475 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:47,475 - sqlalchemy.engine.Engine - INFO - [cached since 32.92s ago] (8053357241, 1, 0)
2025-03-20 18:50:47,477 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:47,478 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:47,479 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:47,479 - sqlalchemy.engine.Engine - INFO - [cached since 32.92s ago] (8053357241, 1, 0)
2025-03-20 18:50:47,480 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:47,615 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:47,615 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:47,617 - sqlalchemy.engine.Engine - INFO - [cached since 33.06s ago] (8053357241, 1, 0)
2025-03-20 18:50:47,619 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:48,474 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:48,474 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:48,474 - sqlalchemy.engine.Engine - INFO - [cached since 33.92s ago] (8053357241, 1, 0)
2025-03-20 18:50:48,475 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:48,478 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:48,478 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:48,479 - sqlalchemy.engine.Engine - INFO - [cached since 33.93s ago] (8053357241, 1, 0)
2025-03-20 18:50:48,479 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:50:48,480 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:50:48,480 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:50:48,480 - sqlalchemy.engine.Engine - INFO - [cached since 33.92s ago] (8053357241, 1, 0)
2025-03-20 18:50:48,481 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:51:13,667 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:51:13,668 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:51:13,669 - sqlalchemy.engine.Engine - INFO - [cached since 59.12s ago] (8053357241, 1, 0)
2025-03-20 18:51:13,670 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:51:13,673 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:51:13,673 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:51:13,673 - sqlalchemy.engine.Engine - INFO - [cached since 59.12s ago] (8053357241, 1, 0)
2025-03-20 18:51:13,675 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:51:13,676 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:51:13,677 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:51:13,677 - sqlalchemy.engine.Engine - INFO - [cached since 59.12s ago] (8053357241, 1, 0)
2025-03-20 18:51:13,678 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:51:13,725 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:51:13,725 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:51:13,725 - sqlalchemy.engine.Engine - INFO - [cached since 59.17s ago] (8053357241, 1, 0)
2025-03-20 18:51:13,727 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (tg_id, username, first_name, is_premium, premium_end_date, crystals, language, blocked, last_gift, created_at, updated_at, coins, premium_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:51:13,727 - sqlalchemy.engine.Engine - INFO - [generated in 0.00033s] (8053357241, 'maksmaksimov12', None, 0, None, 0, 'ru', 0, None, '2025-03-20 16:51:13.727848', '2025-03-20 16:51:13.727848', 0, None)
2025-03-20 18:51:13,730 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:51:13,733 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:51:13,733 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
2025-03-20 18:51:13,733 - sqlalchemy.engine.Engine - INFO - [cached since 37.78s ago] (2,)
2025-03-20 18:51:13,735 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:51:13,735 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:51:13,736 - sqlalchemy.engine.Engine - INFO - [cached since 59.18s ago] (8053357241, 1, 0)
2025-03-20 18:51:13,739 - sqlalchemy.engine.Engine - INFO - SELECT user_achievements.id AS user_achievements_id, user_achievements.user_id AS user_achievements_user_id, user_achievements.achievement_id AS user_achievements_achievement_id, user_achievements.achieved_at AS user_achievements_achieved_at, achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM user_achievements JOIN achievements ON user_achievements.achievement_id = achievements.id 
WHERE user_achievements.user_id = ?
2025-03-20 18:51:13,739 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] (2,)
2025-03-20 18:51:13,740 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:51:13,740 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:53:50,142 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-03-20 18:53:50,143 - aiogram - WARNING - Goodbye!
2025-03-20 18:53:51,479 - __main__ - INFO - Запуск бота...
2025-03-20 18:53:51,736 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:53:51,737 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-20 18:53:51,737 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,738 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("referrals")
2025-03-20 18:53:51,739 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,739 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("announcements")
2025-03-20 18:53:51,739 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,740 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("reports")
2025-03-20 18:53:51,740 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,740 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("favorites")
2025-03-20 18:53:51,741 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,741 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("crystal_transactions")
2025-03-20 18:53:51,741 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,742 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("premium_prices")
2025-03-20 18:53:51,742 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,742 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sponsors")
2025-03-20 18:53:51,742 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,743 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_sponsor_subscriptions")
2025-03-20 18:53:51,743 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,743 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_codes")
2025-03-20 18:53:51,743 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,743 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_uses")
2025-03-20 18:53:51,743 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,743 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("achievements")
2025-03-20 18:53:51,743 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,745 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_achievements")
2025-03-20 18:53:51,745 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,745 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_visited_sections")
2025-03-20 18:53:51,745 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,745 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_secret_purchases")
2025-03-20 18:53:51,746 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,746 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("bot_settings")
2025-03-20 18:53:51,746 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:53:51,747 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:53:51,765 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:53:51,771 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:53:51,772 - sqlalchemy.engine.Engine - INFO - [generated in 0.00151s] (30, 1, 0)
2025-03-20 18:53:51,773 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:53:51,773 - sqlalchemy.engine.Engine - INFO - [cached since 0.00317s ago] (180, 1, 0)
2025-03-20 18:53:51,773 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:53:51,773 - sqlalchemy.engine.Engine - INFO - [cached since 0.004136s ago] (365, 1, 0)
2025-03-20 18:53:51,775 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:53:51,775 - sqlalchemy.engine.Engine - INFO - [cached since 0.005134s ago] (36500, 1, 0)
2025-03-20 18:53:51,776 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:53:51,793 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:53:51,797 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM achievements) AS anon_1
2025-03-20 18:53:51,798 - sqlalchemy.engine.Engine - INFO - [generated in 0.00054s] ()
2025-03-20 18:53:51,799 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:53:51,800 - root - INFO - Achievements handlers registered successfully
2025-03-20 18:53:51,932 - aiogram - INFO - Bot: Бубсер Поиск Бот [@Bubser_PoiskBot]
2025-03-20 18:53:52,018 - aiogram - WARNING - Updates were skipped successfully.
2025-03-20 18:53:52,018 - __main__ - INFO - Бот успешно запущен!
2025-03-20 18:53:52,019 - aiogram - WARNING - Goodbye!
2025-03-20 18:54:41,899 - __main__ - INFO - Запуск бота...
2025-03-20 18:54:42,148 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:42,149 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-20 18:54:42,149 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,151 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("referrals")
2025-03-20 18:54:42,151 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,151 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("announcements")
2025-03-20 18:54:42,152 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,152 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("reports")
2025-03-20 18:54:42,152 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,153 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("favorites")
2025-03-20 18:54:42,153 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,153 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("crystal_transactions")
2025-03-20 18:54:42,153 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,155 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("premium_prices")
2025-03-20 18:54:42,155 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,155 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sponsors")
2025-03-20 18:54:42,156 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,156 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_sponsor_subscriptions")
2025-03-20 18:54:42,156 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,156 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_codes")
2025-03-20 18:54:42,156 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,157 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_uses")
2025-03-20 18:54:42,157 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,157 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("achievements")
2025-03-20 18:54:42,157 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,157 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_achievements")
2025-03-20 18:54:42,158 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,158 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_visited_sections")
2025-03-20 18:54:42,158 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,158 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_secret_purchases")
2025-03-20 18:54:42,158 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,159 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("bot_settings")
2025-03-20 18:54:42,159 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:54:42,159 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:54:42,176 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:42,179 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:42,179 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] (30, 1, 0)
2025-03-20 18:54:42,180 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:42,181 - sqlalchemy.engine.Engine - INFO - [cached since 0.00163s ago] (180, 1, 0)
2025-03-20 18:54:42,181 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:42,181 - sqlalchemy.engine.Engine - INFO - [cached since 0.002452s ago] (365, 1, 0)
2025-03-20 18:54:42,182 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:42,182 - sqlalchemy.engine.Engine - INFO - [cached since 0.003478s ago] (36500, 1, 0)
2025-03-20 18:54:42,183 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:54:42,193 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:42,198 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM achievements) AS anon_1
2025-03-20 18:54:42,198 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ()
2025-03-20 18:54:42,199 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:42,201 - root - INFO - Achievements handlers registered successfully
2025-03-20 18:54:42,328 - aiogram - INFO - Bot: Бубсер Поиск Бот [@Bubser_PoiskBot]
2025-03-20 18:54:42,407 - aiogram - WARNING - Updates were skipped successfully.
2025-03-20 18:54:42,407 - __main__ - INFO - Бот успешно запущен!
2025-03-20 18:54:42,407 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:42,410 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.tg_id, users.username, users.first_name, users.is_premium, users.premium_end_date, users.crystals, users.language, users.blocked, users.last_gift, users.created_at, users.updated_at, users.coins, users.premium_until 
FROM users 
WHERE users.is_premium = 1 AND users.premium_end_date <= ?
2025-03-20 18:54:42,410 - sqlalchemy.engine.Engine - INFO - [generated in 0.00044s] ('2025-03-20 18:54:42.407784',)
2025-03-20 18:54:42,412 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:54:42,413 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-03-20 18:54:47,666 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:47,668 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:47,669 - sqlalchemy.engine.Engine - INFO - [generated in 0.00084s] (7139312538, 1, 0)
2025-03-20 18:54:47,669 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:47,671 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:47,672 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:47,672 - sqlalchemy.engine.Engine - INFO - [cached since 0.004457s ago] (7139312538, 1, 0)
2025-03-20 18:54:47,673 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:47,673 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:47,674 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:47,674 - sqlalchemy.engine.Engine - INFO - [generated in 0.00032s] (7139312538, 1, 0)
2025-03-20 18:54:47,675 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:47,676 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:47,676 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:47,676 - sqlalchemy.engine.Engine - INFO - [cached since 0.002299s ago] (7139312538, 1, 0)
2025-03-20 18:54:47,678 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:47,679 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:47,680 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:47,680 - sqlalchemy.engine.Engine - INFO - [cached since 0.006215s ago] (7139312538, 1, 0)
2025-03-20 18:54:47,681 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:47,681 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:47,681 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:47,681 - sqlalchemy.engine.Engine - INFO - [cached since 0.007453s ago] (7139312538, 1, 0)
2025-03-20 18:54:47,682 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:49,637 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:49,639 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:49,639 - sqlalchemy.engine.Engine - INFO - [cached since 1.971s ago] (7139312538, 1, 0)
2025-03-20 18:54:49,640 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:49,641 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:49,641 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:49,642 - sqlalchemy.engine.Engine - INFO - [cached since 1.974s ago] (7139312538, 1, 0)
2025-03-20 18:54:49,642 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:49,643 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:49,644 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:49,644 - sqlalchemy.engine.Engine - INFO - [cached since 1.97s ago] (7139312538, 1, 0)
2025-03-20 18:54:49,646 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:50,428 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:50,430 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:50,431 - sqlalchemy.engine.Engine - INFO - [cached since 2.763s ago] (7139312538, 1, 0)
2025-03-20 18:54:50,432 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:50,433 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:50,433 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:50,434 - sqlalchemy.engine.Engine - INFO - [cached since 2.765s ago] (7139312538, 1, 0)
2025-03-20 18:54:50,434 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:50,436 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:50,436 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:50,436 - sqlalchemy.engine.Engine - INFO - [cached since 2.762s ago] (7139312538, 1, 0)
2025-03-20 18:54:50,438 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:50,485 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:50,485 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:50,486 - sqlalchemy.engine.Engine - INFO - [cached since 2.812s ago] (7139312538, 1, 0)
2025-03-20 18:54:50,488 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:50,489 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:50,489 - sqlalchemy.engine.Engine - INFO - [cached since 2.815s ago] (7139312538, 1, 0)
2025-03-20 18:54:50,493 - sqlalchemy.engine.Engine - INFO - SELECT user_achievements.id AS user_achievements_id, user_achievements.user_id AS user_achievements_user_id, user_achievements.achievement_id AS user_achievements_achievement_id, user_achievements.achieved_at AS user_achievements_achieved_at, achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM user_achievements JOIN achievements ON user_achievements.achievement_id = achievements.id 
WHERE user_achievements.user_id = ?
2025-03-20 18:54:50,494 - sqlalchemy.engine.Engine - INFO - [generated in 0.00128s] (1,)
2025-03-20 18:54:50,495 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:50,499 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:54,855 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:54,856 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:54,856 - sqlalchemy.engine.Engine - INFO - [cached since 7.188s ago] (7115599761, 1, 0)
2025-03-20 18:54:54,857 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:54,859 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:54,860 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:54,860 - sqlalchemy.engine.Engine - INFO - [cached since 7.192s ago] (7115599761, 1, 0)
2025-03-20 18:54:54,861 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:54,862 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:54,862 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:54,862 - sqlalchemy.engine.Engine - INFO - [cached since 7.188s ago] (7115599761, 1, 0)
2025-03-20 18:54:54,862 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:54,863 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:54,865 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:54,865 - sqlalchemy.engine.Engine - INFO - [cached since 7.191s ago] (7115599761, 1, 0)
2025-03-20 18:54:54,867 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:54,868 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:54,868 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:54,868 - sqlalchemy.engine.Engine - INFO - [cached since 7.194s ago] (7115599761, 1, 0)
2025-03-20 18:54:54,869 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:54,869 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:54,870 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:54,870 - sqlalchemy.engine.Engine - INFO - [cached since 7.196s ago] (7115599761, 1, 0)
2025-03-20 18:54:54,871 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:54,872 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:54,872 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:54,873 - sqlalchemy.engine.Engine - INFO - [cached since 7.199s ago] (7115599761, 1, 0)
2025-03-20 18:54:54,876 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (tg_id, username, first_name, is_premium, premium_end_date, crystals, language, blocked, last_gift, created_at, updated_at, coins, premium_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:54:54,876 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] (7115599761, 'hhhsleep', 'zzzsleep', 0, None, 100, 'ru', 0, None, '2025-03-20 18:54:54.874297', '2025-03-20 16:54:54.876348', 0, None)
2025-03-20 18:54:54,879 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:54:55,904 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:55,905 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:55,905 - sqlalchemy.engine.Engine - INFO - [cached since 8.237s ago] (7115599761, 1, 0)
2025-03-20 18:54:55,906 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:55,907 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:55,907 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:55,908 - sqlalchemy.engine.Engine - INFO - [cached since 8.24s ago] (7115599761, 1, 0)
2025-03-20 18:54:55,909 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:55,910 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:55,910 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:55,910 - sqlalchemy.engine.Engine - INFO - [cached since 8.236s ago] (7115599761, 1, 0)
2025-03-20 18:54:55,911 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:56,938 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:56,938 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:56,939 - sqlalchemy.engine.Engine - INFO - [cached since 9.271s ago] (7115599761, 1, 0)
2025-03-20 18:54:56,939 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:56,942 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:56,942 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:56,942 - sqlalchemy.engine.Engine - INFO - [cached since 9.275s ago] (7115599761, 1, 0)
2025-03-20 18:54:56,943 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:56,945 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:56,946 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:56,946 - sqlalchemy.engine.Engine - INFO - [cached since 9.272s ago] (7115599761, 1, 0)
2025-03-20 18:54:56,948 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:57,056 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:57,056 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:57,056 - sqlalchemy.engine.Engine - INFO - [cached since 9.383s ago] (7115599761, 1, 0)
2025-03-20 18:54:57,058 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:54:57,059 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:54:57,059 - sqlalchemy.engine.Engine - INFO - [cached since 9.385s ago] (7115599761, 1, 0)
2025-03-20 18:54:57,060 - sqlalchemy.engine.Engine - INFO - SELECT user_achievements.id AS user_achievements_id, user_achievements.user_id AS user_achievements_user_id, user_achievements.achievement_id AS user_achievements_achievement_id, user_achievements.achieved_at AS user_achievements_achieved_at, achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM user_achievements JOIN achievements ON user_achievements.achievement_id = achievements.id 
WHERE user_achievements.user_id = ?
2025-03-20 18:54:57,060 - sqlalchemy.engine.Engine - INFO - [cached since 6.568s ago] (3,)
2025-03-20 18:54:57,061 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:54:57,061 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:07,309 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-03-20 18:55:07,310 - aiogram - WARNING - Goodbye!
2025-03-20 18:55:10,372 - __main__ - INFO - Запуск бота...
2025-03-20 18:55:10,615 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:10,616 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-20 18:55:10,616 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,617 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2025-03-20 18:55:10,617 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,617 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("referrals")
2025-03-20 18:55:10,617 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,618 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("referrals")
2025-03-20 18:55:10,618 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,618 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("announcements")
2025-03-20 18:55:10,618 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,618 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("announcements")
2025-03-20 18:55:10,618 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,619 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("reports")
2025-03-20 18:55:10,619 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,619 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("reports")
2025-03-20 18:55:10,619 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,619 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("favorites")
2025-03-20 18:55:10,620 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,620 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("favorites")
2025-03-20 18:55:10,620 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,620 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("crystal_transactions")
2025-03-20 18:55:10,620 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,621 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("crystal_transactions")
2025-03-20 18:55:10,621 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,621 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("premium_prices")
2025-03-20 18:55:10,621 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,622 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("premium_prices")
2025-03-20 18:55:10,622 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,622 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sponsors")
2025-03-20 18:55:10,622 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,622 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("sponsors")
2025-03-20 18:55:10,623 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,623 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_sponsor_subscriptions")
2025-03-20 18:55:10,623 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,623 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_sponsor_subscriptions")
2025-03-20 18:55:10,623 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,623 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_codes")
2025-03-20 18:55:10,623 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,623 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("promo_codes")
2025-03-20 18:55:10,623 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,623 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_uses")
2025-03-20 18:55:10,625 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,625 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("promo_uses")
2025-03-20 18:55:10,625 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,625 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("achievements")
2025-03-20 18:55:10,625 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,625 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("achievements")
2025-03-20 18:55:10,626 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,626 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_achievements")
2025-03-20 18:55:10,626 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,626 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_achievements")
2025-03-20 18:55:10,626 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,626 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_visited_sections")
2025-03-20 18:55:10,626 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,627 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_visited_sections")
2025-03-20 18:55:10,627 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,627 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_secret_purchases")
2025-03-20 18:55:10,627 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,627 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_secret_purchases")
2025-03-20 18:55:10,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,628 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("bot_settings")
2025-03-20 18:55:10,628 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,628 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("bot_settings")
2025-03-20 18:55:10,629 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:55:10,630 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	tg_id INTEGER NOT NULL, 
	username VARCHAR, 
	first_name VARCHAR, 
	is_premium BOOLEAN, 
	premium_end_date DATETIME, 
	crystals INTEGER, 
	language VARCHAR, 
	blocked BOOLEAN, 
	last_gift DATETIME, 
	created_at DATETIME, 
	updated_at DATETIME, 
	coins INTEGER, 
	premium_until DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (tg_id)
)


2025-03-20 18:55:10,631 - sqlalchemy.engine.Engine - INFO - [no key 0.00042s] ()
2025-03-20 18:55:10,635 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_id ON users (id)
2025-03-20 18:55:10,635 - sqlalchemy.engine.Engine - INFO - [no key 0.00029s] ()
2025-03-20 18:55:10,639 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE referrals (
	id INTEGER NOT NULL, 
	referrer_id INTEGER NOT NULL, 
	referred_id INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (referred_id)
)


2025-03-20 18:55:10,639 - sqlalchemy.engine.Engine - INFO - [no key 0.00034s] ()
2025-03-20 18:55:10,642 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_referrals_id ON referrals (id)
2025-03-20 18:55:10,642 - sqlalchemy.engine.Engine - INFO - [no key 0.00061s] ()
2025-03-20 18:55:10,647 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE premium_prices (
	id INTEGER NOT NULL, 
	duration_days INTEGER NOT NULL, 
	price FLOAT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (duration_days)
)


2025-03-20 18:55:10,648 - sqlalchemy.engine.Engine - INFO - [no key 0.00046s] ()
2025-03-20 18:55:10,651 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_premium_prices_id ON premium_prices (id)
2025-03-20 18:55:10,652 - sqlalchemy.engine.Engine - INFO - [no key 0.00029s] ()
2025-03-20 18:55:10,653 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE sponsors (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	link VARCHAR NOT NULL, 
	channel_id VARCHAR, 
	reward INTEGER, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id)
)


2025-03-20 18:55:10,653 - sqlalchemy.engine.Engine - INFO - [no key 0.00035s] ()
2025-03-20 18:55:10,658 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_sponsors_id ON sponsors (id)
2025-03-20 18:55:10,659 - sqlalchemy.engine.Engine - INFO - [no key 0.00122s] ()
2025-03-20 18:55:10,661 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE promo_codes (
	id INTEGER NOT NULL, 
	code VARCHAR NOT NULL, 
	duration_days INTEGER NOT NULL, 
	max_uses INTEGER, 
	uses_count INTEGER, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	expires_at DATETIME, 
	PRIMARY KEY (id)
)


2025-03-20 18:55:10,662 - sqlalchemy.engine.Engine - INFO - [no key 0.00052s] ()
2025-03-20 18:55:10,665 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_promo_codes_id ON promo_codes (id)
2025-03-20 18:55:10,665 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] ()
2025-03-20 18:55:10,667 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_promo_codes_code ON promo_codes (code)
2025-03-20 18:55:10,667 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] ()
2025-03-20 18:55:10,670 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE achievements (
	id INTEGER NOT NULL, 
	"key" VARCHAR NOT NULL, 
	name VARCHAR NOT NULL, 
	description VARCHAR NOT NULL, 
	icon VARCHAR, 
	is_purchasable BOOLEAN, 
	price INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE ("key")
)


2025-03-20 18:55:10,670 - sqlalchemy.engine.Engine - INFO - [no key 0.00037s] ()
2025-03-20 18:55:10,672 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_achievements_id ON achievements (id)
2025-03-20 18:55:10,672 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2025-03-20 18:55:10,674 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE bot_settings (
	id INTEGER NOT NULL, 
	"key" VARCHAR NOT NULL, 
	value VARCHAR, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE ("key")
)


2025-03-20 18:55:10,675 - sqlalchemy.engine.Engine - INFO - [no key 0.00031s] ()
2025-03-20 18:55:10,677 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE announcements (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	announcement_type VARCHAR(4) NOT NULL, 
	image_id VARCHAR NOT NULL, 
	media_id VARCHAR, 
	media_type VARCHAR, 
	description TEXT NOT NULL, 
	keyword VARCHAR, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:55:10,678 - sqlalchemy.engine.Engine - INFO - [no key 0.00044s] ()
2025-03-20 18:55:10,680 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_announcements_id ON announcements (id)
2025-03-20 18:55:10,680 - sqlalchemy.engine.Engine - INFO - [no key 0.00019s] ()
2025-03-20 18:55:10,682 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE crystal_transactions (
	id INTEGER NOT NULL, 
	sender_id INTEGER, 
	receiver_id INTEGER, 
	amount INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(sender_id) REFERENCES users (id), 
	FOREIGN KEY(receiver_id) REFERENCES users (id)
)


2025-03-20 18:55:10,682 - sqlalchemy.engine.Engine - INFO - [no key 0.00030s] ()
2025-03-20 18:55:10,685 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_crystal_transactions_id ON crystal_transactions (id)
2025-03-20 18:55:10,686 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] ()
2025-03-20 18:55:10,688 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_sponsor_subscriptions (
	id INTEGER NOT NULL, 
	user_tg_id INTEGER NOT NULL, 
	sponsor_id INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_tg_id) REFERENCES users (tg_id), 
	FOREIGN KEY(sponsor_id) REFERENCES sponsors (id)
)


2025-03-20 18:55:10,688 - sqlalchemy.engine.Engine - INFO - [no key 0.00033s] ()
2025-03-20 18:55:10,691 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE promo_uses (
	id INTEGER NOT NULL, 
	promo_id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	used_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(promo_id) REFERENCES promo_codes (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:55:10,691 - sqlalchemy.engine.Engine - INFO - [no key 0.00039s] ()
2025-03-20 18:55:10,694 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_promo_uses_id ON promo_uses (id)
2025-03-20 18:55:10,694 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] ()
2025-03-20 18:55:10,697 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_achievements (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	achievement_id INTEGER NOT NULL, 
	achieved_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	FOREIGN KEY(achievement_id) REFERENCES achievements (id)
)


2025-03-20 18:55:10,697 - sqlalchemy.engine.Engine - INFO - [no key 0.00040s] ()
2025-03-20 18:55:10,700 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_achievements_id ON user_achievements (id)
2025-03-20 18:55:10,701 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] ()
2025-03-20 18:55:10,703 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_visited_sections (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	section VARCHAR NOT NULL, 
	visited_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:55:10,703 - sqlalchemy.engine.Engine - INFO - [no key 0.00028s] ()
2025-03-20 18:55:10,706 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_visited_sections_id ON user_visited_sections (id)
2025-03-20 18:55:10,706 - sqlalchemy.engine.Engine - INFO - [no key 0.00041s] ()
2025-03-20 18:55:10,708 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_secret_purchases (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	content_key VARCHAR NOT NULL, 
	purchased_at DATETIME, 
	price INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:55:10,709 - sqlalchemy.engine.Engine - INFO - [no key 0.00035s] ()
2025-03-20 18:55:10,711 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_secret_purchases_id ON user_secret_purchases (id)
2025-03-20 18:55:10,711 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] ()
2025-03-20 18:55:10,715 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reports (
	id INTEGER NOT NULL, 
	reporter_id INTEGER, 
	announcement_id INTEGER, 
	reason VARCHAR NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(reporter_id) REFERENCES users (id), 
	FOREIGN KEY(announcement_id) REFERENCES announcements (id)
)


2025-03-20 18:55:10,715 - sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
2025-03-20 18:55:10,717 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_reports_id ON reports (id)
2025-03-20 18:55:10,717 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] ()
2025-03-20 18:55:10,720 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE favorites (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	announcement_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	FOREIGN KEY(announcement_id) REFERENCES announcements (id)
)


2025-03-20 18:55:10,720 - sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
2025-03-20 18:55:10,723 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_favorites_id ON favorites (id)
2025-03-20 18:55:10,723 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] ()
2025-03-20 18:55:10,726 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:55:10,743 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:10,747 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:10,748 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] (30, 1, 0)
2025-03-20 18:55:10,749 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:10,749 - sqlalchemy.engine.Engine - INFO - [cached since 0.002222s ago] (180, 1, 0)
2025-03-20 18:55:10,750 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:10,750 - sqlalchemy.engine.Engine - INFO - [cached since 0.003263s ago] (365, 1, 0)
2025-03-20 18:55:10,751 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:10,751 - sqlalchemy.engine.Engine - INFO - [cached since 0.004s ago] (36500, 1, 0)
2025-03-20 18:55:10,753 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,753 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s (insertmanyvalues) 1/4 (ordered; batch not supported)] (30, 500.0, '2025-03-20 16:55:10.752649', '2025-03-20 16:55:10.752649')
2025-03-20 18:55:10,755 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,755 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (180, 2500.0, '2025-03-20 16:55:10.752649', '2025-03-20 16:55:10.752649')
2025-03-20 18:55:10,755 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,756 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (365, 4500.0, '2025-03-20 16:55:10.752649', '2025-03-20 16:55:10.752649')
2025-03-20 18:55:10,756 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,756 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (36500, 9900.0, '2025-03-20 16:55:10.752649', '2025-03-20 16:55:10.752649')
2025-03-20 18:55:10,757 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:55:10,772 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:10,776 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM achievements) AS anon_1
2025-03-20 18:55:10,776 - sqlalchemy.engine.Engine - INFO - [generated in 0.00046s] ()
2025-03-20 18:55:10,778 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:55:10,779 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] ('major', 'Мажор', 'Доказательство вашей финансовой состоятельности', '💰', 1, 10000, '2025-03-20 16:55:10.778140')
2025-03-20 18:55:10,780 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,780 - sqlalchemy.engine.Engine - INFO - [generated in 0.00015s (insertmanyvalues) 1/9 (ordered; batch not supported)] ('popular', 'Популярный', 'Добавить объявление по поиску команды', '👥', 0, 0, '2025-03-20 16:55:10.780131')
2025-03-20 18:55:10,781 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,781 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/9 (ordered; batch not supported)] ('club_fighter', 'Бойцовский клуб', 'Добавить объявление по поиску клуба', '🥊', 0, 0, '2025-03-20 16:55:10.780131')
2025-03-20 18:55:10,781 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,781 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/9 (ordered; batch not supported)] ('explorer', 'Искатель', 'Посетить все разделы бота', '🔍', 0, 0, '2025-03-20 16:55:10.780131')
2025-03-20 18:55:10,782 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,782 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/9 (ordered; batch not supported)] ('legend', 'Легенда', 'Купить премиум статус', '⭐', 0, 0, '2025-03-20 16:55:10.780131')
2025-03-20 18:55:10,782 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,783 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 5/9 (ordered; batch not supported)] ('leprechaun', 'Лепрекон', 'Накопить 15,000 монет в балансе', '🍀', 0, 0, '2025-03-20 16:55:10.780131')
2025-03-20 18:55:10,783 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,783 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 6/9 (ordered; batch not supported)] ('lucky', 'Испытать удачу', 'Принять участие в розыгрыше монет', '🎁', 0, 0, '2025-03-20 16:55:10.780131')
2025-03-20 18:55:10,783 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,783 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 7/9 (ordered; batch not supported)] ('business', 'Бизнес-мачо', 'Пригласить человека по реферальной ссылке', '💼', 0, 0, '2025-03-20 16:55:10.780131')
2025-03-20 18:55:10,783 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,783 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 8/9 (ordered; batch not supported)] ('follow_me', 'Делай как я', 'Пригласить 10 человек по реферальной ссылке', '👑', 0, 0, '2025-03-20 16:55:10.780131')
2025-03-20 18:55:10,784 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:55:10,784 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 9/9 (ordered; batch not supported)] ('friend', 'Настоящий друг', 'Пригласить 25 человек по реферальной ссылке', '❤️', 0, 0, '2025-03-20 16:55:10.780131')
2025-03-20 18:55:10,784 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:55:10,787 - root - INFO - Achievements handlers registered successfully
2025-03-20 18:55:10,921 - aiogram - INFO - Bot: Бубсер Поиск Бот [@Bubser_PoiskBot]
2025-03-20 18:55:11,000 - aiogram - WARNING - Updates were skipped successfully.
2025-03-20 18:55:11,000 - __main__ - INFO - Бот успешно запущен!
2025-03-20 18:55:11,001 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:11,004 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.tg_id, users.username, users.first_name, users.is_premium, users.premium_end_date, users.crystals, users.language, users.blocked, users.last_gift, users.created_at, users.updated_at, users.coins, users.premium_until 
FROM users 
WHERE users.is_premium = 1 AND users.premium_end_date <= ?
2025-03-20 18:55:11,004 - sqlalchemy.engine.Engine - INFO - [generated in 0.00056s] ('2025-03-20 18:55:11.000454',)
2025-03-20 18:55:11,005 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:55:11,005 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-03-20 18:55:12,796 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:12,798 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:12,798 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] (7115599761, 1, 0)
2025-03-20 18:55:12,800 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:12,801 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:12,802 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:12,802 - sqlalchemy.engine.Engine - INFO - [cached since 0.004176s ago] (7115599761, 1, 0)
2025-03-20 18:55:12,802 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:12,803 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:12,804 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:12,804 - sqlalchemy.engine.Engine - INFO - [generated in 0.00035s] (7115599761, 1, 0)
2025-03-20 18:55:12,805 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:12,805 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:12,805 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:12,806 - sqlalchemy.engine.Engine - INFO - [cached since 0.002579s ago] (7115599761, 1, 0)
2025-03-20 18:55:12,806 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:12,807 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:12,807 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:12,807 - sqlalchemy.engine.Engine - INFO - [cached since 0.004361s ago] (7115599761, 1, 0)
2025-03-20 18:55:12,808 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:12,808 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:12,808 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:12,809 - sqlalchemy.engine.Engine - INFO - [cached since 0.005568s ago] (7115599761, 1, 0)
2025-03-20 18:55:12,809 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:12,809 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:12,809 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:12,810 - sqlalchemy.engine.Engine - INFO - [cached since 0.006673s ago] (7115599761, 1, 0)
2025-03-20 18:55:12,811 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (tg_id, username, first_name, is_premium, premium_end_date, crystals, language, blocked, last_gift, created_at, updated_at, coins, premium_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:55:12,811 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] (7115599761, 'hhhsleep', 'zzzsleep', 0, None, 100, 'ru', 0, None, '2025-03-20 18:55:12.810870', '2025-03-20 16:55:12.811868', 0, None)
2025-03-20 18:55:12,813 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:55:13,794 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:13,794 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:13,795 - sqlalchemy.engine.Engine - INFO - [cached since 0.9969s ago] (7115599761, 1, 0)
2025-03-20 18:55:13,795 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:13,796 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:13,796 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:13,798 - sqlalchemy.engine.Engine - INFO - [cached since 0.9999s ago] (7115599761, 1, 0)
2025-03-20 18:55:13,798 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:13,799 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:13,799 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:13,800 - sqlalchemy.engine.Engine - INFO - [cached since 0.9961s ago] (7115599761, 1, 0)
2025-03-20 18:55:13,801 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:14,772 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:14,773 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:14,773 - sqlalchemy.engine.Engine - INFO - [cached since 1.976s ago] (7115599761, 1, 0)
2025-03-20 18:55:14,775 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:14,778 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:14,779 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:14,779 - sqlalchemy.engine.Engine - INFO - [cached since 1.982s ago] (7115599761, 1, 0)
2025-03-20 18:55:14,780 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:14,780 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:14,781 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:14,781 - sqlalchemy.engine.Engine - INFO - [cached since 1.977s ago] (7115599761, 1, 0)
2025-03-20 18:55:14,782 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:14,835 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:14,836 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:14,836 - sqlalchemy.engine.Engine - INFO - [cached since 2.033s ago] (7115599761, 1, 0)
2025-03-20 18:55:14,839 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:55:14,840 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:55:14,841 - sqlalchemy.engine.Engine - INFO - [cached since 2.037s ago] (7115599761, 1, 0)
2025-03-20 18:55:14,843 - sqlalchemy.engine.Engine - INFO - SELECT user_achievements.id AS user_achievements_id, user_achievements.user_id AS user_achievements_user_id, user_achievements.achievement_id AS user_achievements_achievement_id, user_achievements.achieved_at AS user_achievements_achieved_at, achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM user_achievements JOIN achievements ON user_achievements.achievement_id = achievements.id 
WHERE user_achievements.user_id = ?
2025-03-20 18:55:14,843 - sqlalchemy.engine.Engine - INFO - [generated in 0.00073s] (1,)
2025-03-20 18:55:14,845 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:55:14,846 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:57:19,263 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-03-20 18:57:19,263 - aiogram - WARNING - Goodbye!
2025-03-20 18:57:20,903 - __main__ - INFO - Запуск бота...
2025-03-20 18:57:21,183 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:57:21,185 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-20 18:57:21,185 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,188 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("referrals")
2025-03-20 18:57:21,188 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,189 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("announcements")
2025-03-20 18:57:21,189 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,190 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("reports")
2025-03-20 18:57:21,190 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,190 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("favorites")
2025-03-20 18:57:21,190 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,191 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("crystal_transactions")
2025-03-20 18:57:21,191 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,191 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("premium_prices")
2025-03-20 18:57:21,191 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,192 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sponsors")
2025-03-20 18:57:21,192 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,192 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_sponsor_subscriptions")
2025-03-20 18:57:21,193 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,194 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_codes")
2025-03-20 18:57:21,194 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,194 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_uses")
2025-03-20 18:57:21,195 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,195 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("achievements")
2025-03-20 18:57:21,195 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,195 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_achievements")
2025-03-20 18:57:21,195 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,196 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_visited_sections")
2025-03-20 18:57:21,196 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,196 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_secret_purchases")
2025-03-20 18:57:21,196 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,197 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("bot_settings")
2025-03-20 18:57:21,197 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:57:21,197 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:57:21,223 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:57:21,228 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:57:21,229 - sqlalchemy.engine.Engine - INFO - [generated in 0.00172s] (30, 1, 0)
2025-03-20 18:57:21,231 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:57:21,232 - sqlalchemy.engine.Engine - INFO - [cached since 0.004245s ago] (180, 1, 0)
2025-03-20 18:57:21,233 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:57:21,233 - sqlalchemy.engine.Engine - INFO - [cached since 0.005905s ago] (365, 1, 0)
2025-03-20 18:57:21,235 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:57:21,235 - sqlalchemy.engine.Engine - INFO - [cached since 0.008572s ago] (36500, 1, 0)
2025-03-20 18:57:21,236 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:57:21,257 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:57:21,262 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM achievements) AS anon_1
2025-03-20 18:57:21,265 - sqlalchemy.engine.Engine - INFO - [generated in 0.00294s] ()
2025-03-20 18:57:21,266 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:57:21,272 - root - INFO - Achievements handlers registered successfully
2025-03-20 18:57:21,412 - aiogram - INFO - Bot: Бубсер Поиск Бот [@Bubser_PoiskBot]
2025-03-20 18:57:21,492 - aiogram - WARNING - Updates were skipped successfully.
2025-03-20 18:57:21,492 - __main__ - INFO - Бот успешно запущен!
2025-03-20 18:57:21,493 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:57:21,496 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.tg_id, users.username, users.first_name, users.is_premium, users.premium_end_date, users.crystals, users.language, users.blocked, users.last_gift, users.created_at, users.updated_at, users.coins, users.premium_until 
FROM users 
WHERE users.is_premium = 1 AND users.premium_end_date <= ?
2025-03-20 18:57:21,496 - sqlalchemy.engine.Engine - INFO - [generated in 0.00050s] ('2025-03-20 18:57:21.493012',)
2025-03-20 18:57:21,497 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:57:21,498 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-03-20 18:57:22,335 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-03-20 18:57:22,335 - aiogram - WARNING - Goodbye!
2025-03-20 18:58:06,423 - __main__ - INFO - Запуск бота...
2025-03-20 18:58:06,685 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:06,686 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-20 18:58:06,686 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,687 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2025-03-20 18:58:06,688 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,688 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("referrals")
2025-03-20 18:58:06,688 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,688 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("referrals")
2025-03-20 18:58:06,688 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,689 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("announcements")
2025-03-20 18:58:06,689 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,689 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("announcements")
2025-03-20 18:58:06,689 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,689 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("reports")
2025-03-20 18:58:06,689 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,690 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("reports")
2025-03-20 18:58:06,690 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,690 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("favorites")
2025-03-20 18:58:06,690 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,691 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("favorites")
2025-03-20 18:58:06,691 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,691 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("crystal_transactions")
2025-03-20 18:58:06,691 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,692 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("crystal_transactions")
2025-03-20 18:58:06,692 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,693 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("premium_prices")
2025-03-20 18:58:06,693 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,693 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("premium_prices")
2025-03-20 18:58:06,693 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,694 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sponsors")
2025-03-20 18:58:06,694 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,695 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("sponsors")
2025-03-20 18:58:06,695 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,696 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_sponsor_subscriptions")
2025-03-20 18:58:06,696 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,696 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_sponsor_subscriptions")
2025-03-20 18:58:06,696 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,696 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_codes")
2025-03-20 18:58:06,696 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,697 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("promo_codes")
2025-03-20 18:58:06,697 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,697 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_uses")
2025-03-20 18:58:06,697 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,698 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("promo_uses")
2025-03-20 18:58:06,698 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,698 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("achievements")
2025-03-20 18:58:06,698 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,699 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("achievements")
2025-03-20 18:58:06,699 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,700 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_achievements")
2025-03-20 18:58:06,700 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,700 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_achievements")
2025-03-20 18:58:06,701 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,701 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_visited_sections")
2025-03-20 18:58:06,701 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,702 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_visited_sections")
2025-03-20 18:58:06,702 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,702 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_secret_purchases")
2025-03-20 18:58:06,702 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,702 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_secret_purchases")
2025-03-20 18:58:06,703 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,703 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("bot_settings")
2025-03-20 18:58:06,703 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,703 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("bot_settings")
2025-03-20 18:58:06,703 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:06,703 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	tg_id INTEGER NOT NULL, 
	username VARCHAR, 
	first_name VARCHAR, 
	is_premium BOOLEAN, 
	premium_end_date DATETIME, 
	crystals INTEGER, 
	language VARCHAR, 
	blocked BOOLEAN, 
	last_gift DATETIME, 
	created_at DATETIME, 
	updated_at DATETIME, 
	coins INTEGER, 
	premium_until DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (tg_id)
)


2025-03-20 18:58:06,705 - sqlalchemy.engine.Engine - INFO - [no key 0.00043s] ()
2025-03-20 18:58:06,709 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_id ON users (id)
2025-03-20 18:58:06,709 - sqlalchemy.engine.Engine - INFO - [no key 0.00033s] ()
2025-03-20 18:58:06,712 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE referrals (
	id INTEGER NOT NULL, 
	referrer_id INTEGER NOT NULL, 
	referred_id INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (referred_id)
)


2025-03-20 18:58:06,713 - sqlalchemy.engine.Engine - INFO - [no key 0.00065s] ()
2025-03-20 18:58:06,727 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_referrals_id ON referrals (id)
2025-03-20 18:58:06,727 - sqlalchemy.engine.Engine - INFO - [no key 0.00031s] ()
2025-03-20 18:58:06,730 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE premium_prices (
	id INTEGER NOT NULL, 
	duration_days INTEGER NOT NULL, 
	price FLOAT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (duration_days)
)


2025-03-20 18:58:06,731 - sqlalchemy.engine.Engine - INFO - [no key 0.00044s] ()
2025-03-20 18:58:06,734 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_premium_prices_id ON premium_prices (id)
2025-03-20 18:58:06,735 - sqlalchemy.engine.Engine - INFO - [no key 0.00041s] ()
2025-03-20 18:58:06,739 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE sponsors (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	link VARCHAR NOT NULL, 
	channel_id VARCHAR, 
	reward INTEGER, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id)
)


2025-03-20 18:58:06,741 - sqlalchemy.engine.Engine - INFO - [no key 0.00156s] ()
2025-03-20 18:58:06,743 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_sponsors_id ON sponsors (id)
2025-03-20 18:58:06,745 - sqlalchemy.engine.Engine - INFO - [no key 0.00039s] ()
2025-03-20 18:58:06,749 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE promo_codes (
	id INTEGER NOT NULL, 
	code VARCHAR NOT NULL, 
	duration_days INTEGER NOT NULL, 
	max_uses INTEGER, 
	uses_count INTEGER, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	expires_at DATETIME, 
	PRIMARY KEY (id)
)


2025-03-20 18:58:06,749 - sqlalchemy.engine.Engine - INFO - [no key 0.00065s] ()
2025-03-20 18:58:06,752 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_promo_codes_id ON promo_codes (id)
2025-03-20 18:58:06,752 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] ()
2025-03-20 18:58:06,756 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_promo_codes_code ON promo_codes (code)
2025-03-20 18:58:06,756 - sqlalchemy.engine.Engine - INFO - [no key 0.00091s] ()
2025-03-20 18:58:06,761 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE achievements (
	id INTEGER NOT NULL, 
	"key" VARCHAR NOT NULL, 
	name VARCHAR NOT NULL, 
	description VARCHAR NOT NULL, 
	icon VARCHAR, 
	is_purchasable BOOLEAN, 
	price INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE ("key")
)


2025-03-20 18:58:06,761 - sqlalchemy.engine.Engine - INFO - [no key 0.00061s] ()
2025-03-20 18:58:06,765 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_achievements_id ON achievements (id)
2025-03-20 18:58:06,765 - sqlalchemy.engine.Engine - INFO - [no key 0.00033s] ()
2025-03-20 18:58:06,768 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE bot_settings (
	id INTEGER NOT NULL, 
	"key" VARCHAR NOT NULL, 
	value VARCHAR, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE ("key")
)


2025-03-20 18:58:06,768 - sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
2025-03-20 18:58:06,771 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE announcements (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	announcement_type VARCHAR(4) NOT NULL, 
	image_id VARCHAR NOT NULL, 
	media_id VARCHAR, 
	media_type VARCHAR, 
	description TEXT NOT NULL, 
	keyword VARCHAR, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:58:06,771 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2025-03-20 18:58:06,774 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_announcements_id ON announcements (id)
2025-03-20 18:58:06,774 - sqlalchemy.engine.Engine - INFO - [no key 0.00026s] ()
2025-03-20 18:58:06,777 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE crystal_transactions (
	id INTEGER NOT NULL, 
	sender_id INTEGER, 
	receiver_id INTEGER, 
	amount INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(sender_id) REFERENCES users (id), 
	FOREIGN KEY(receiver_id) REFERENCES users (id)
)


2025-03-20 18:58:06,778 - sqlalchemy.engine.Engine - INFO - [no key 0.00039s] ()
2025-03-20 18:58:06,780 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_crystal_transactions_id ON crystal_transactions (id)
2025-03-20 18:58:06,780 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] ()
2025-03-20 18:58:06,783 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_sponsor_subscriptions (
	id INTEGER NOT NULL, 
	user_tg_id INTEGER NOT NULL, 
	sponsor_id INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_tg_id) REFERENCES users (tg_id), 
	FOREIGN KEY(sponsor_id) REFERENCES sponsors (id)
)


2025-03-20 18:58:06,783 - sqlalchemy.engine.Engine - INFO - [no key 0.00069s] ()
2025-03-20 18:58:06,787 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE promo_uses (
	id INTEGER NOT NULL, 
	promo_id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	used_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(promo_id) REFERENCES promo_codes (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:58:06,787 - sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
2025-03-20 18:58:06,790 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_promo_uses_id ON promo_uses (id)
2025-03-20 18:58:06,790 - sqlalchemy.engine.Engine - INFO - [no key 0.00031s] ()
2025-03-20 18:58:06,793 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_achievements (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	achievement_id INTEGER NOT NULL, 
	achieved_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	FOREIGN KEY(achievement_id) REFERENCES achievements (id)
)


2025-03-20 18:58:06,793 - sqlalchemy.engine.Engine - INFO - [no key 0.00033s] ()
2025-03-20 18:58:06,796 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_achievements_id ON user_achievements (id)
2025-03-20 18:58:06,798 - sqlalchemy.engine.Engine - INFO - [no key 0.00114s] ()
2025-03-20 18:58:06,800 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_visited_sections (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	section VARCHAR NOT NULL, 
	visited_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:58:06,801 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2025-03-20 18:58:06,804 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_visited_sections_id ON user_visited_sections (id)
2025-03-20 18:58:06,804 - sqlalchemy.engine.Engine - INFO - [no key 0.00048s] ()
2025-03-20 18:58:06,810 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_secret_purchases (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	content_key VARCHAR NOT NULL, 
	purchased_at DATETIME, 
	price INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:58:06,811 - sqlalchemy.engine.Engine - INFO - [no key 0.00139s] ()
2025-03-20 18:58:06,814 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_secret_purchases_id ON user_secret_purchases (id)
2025-03-20 18:58:06,815 - sqlalchemy.engine.Engine - INFO - [no key 0.00030s] ()
2025-03-20 18:58:06,819 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reports (
	id INTEGER NOT NULL, 
	reporter_id INTEGER, 
	announcement_id INTEGER, 
	reason VARCHAR NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(reporter_id) REFERENCES users (id), 
	FOREIGN KEY(announcement_id) REFERENCES announcements (id)
)


2025-03-20 18:58:06,819 - sqlalchemy.engine.Engine - INFO - [no key 0.00041s] ()
2025-03-20 18:58:06,821 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_reports_id ON reports (id)
2025-03-20 18:58:06,822 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] ()
2025-03-20 18:58:06,824 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE favorites (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	announcement_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	FOREIGN KEY(announcement_id) REFERENCES announcements (id)
)


2025-03-20 18:58:06,825 - sqlalchemy.engine.Engine - INFO - [no key 0.00083s] ()
2025-03-20 18:58:06,827 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_favorites_id ON favorites (id)
2025-03-20 18:58:06,827 - sqlalchemy.engine.Engine - INFO - [no key 0.00023s] ()
2025-03-20 18:58:06,831 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:58:06,849 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:06,853 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:06,855 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] (30, 1, 0)
2025-03-20 18:58:06,856 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:06,856 - sqlalchemy.engine.Engine - INFO - [cached since 0.002159s ago] (180, 1, 0)
2025-03-20 18:58:06,857 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:06,857 - sqlalchemy.engine.Engine - INFO - [cached since 0.003388s ago] (365, 1, 0)
2025-03-20 18:58:06,858 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:06,859 - sqlalchemy.engine.Engine - INFO - [cached since 0.005092s ago] (36500, 1, 0)
2025-03-20 18:58:06,861 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,861 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s (insertmanyvalues) 1/4 (ordered; batch not supported)] (30, 500.0, '2025-03-20 16:58:06.861920', '2025-03-20 16:58:06.861920')
2025-03-20 18:58:06,862 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,862 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (180, 2500.0, '2025-03-20 16:58:06.861920', '2025-03-20 16:58:06.861920')
2025-03-20 18:58:06,863 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,863 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (365, 4500.0, '2025-03-20 16:58:06.861920', '2025-03-20 16:58:06.861920')
2025-03-20 18:58:06,863 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,863 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (36500, 9900.0, '2025-03-20 16:58:06.861920', '2025-03-20 16:58:06.861920')
2025-03-20 18:58:06,863 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:58:06,881 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:06,885 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM achievements) AS anon_1
2025-03-20 18:58:06,885 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] ()
2025-03-20 18:58:06,889 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:58:06,889 - sqlalchemy.engine.Engine - INFO - [generated in 0.00063s] ('major', 'Мажор', 'Доказательство вашей финансовой состоятельности', '💰', 1, 10000, '2025-03-20 16:58:06.888446')
2025-03-20 18:58:06,891 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,892 - sqlalchemy.engine.Engine - INFO - [generated in 0.00016s (insertmanyvalues) 1/9 (ordered; batch not supported)] ('popular', 'Популярный', 'Добавить объявление по поиску команды', '👥', 0, 0, '2025-03-20 16:58:06.891439')
2025-03-20 18:58:06,892 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,893 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/9 (ordered; batch not supported)] ('club_fighter', 'Бойцовский клуб', 'Добавить объявление по поиску клуба', '🥊', 0, 0, '2025-03-20 16:58:06.891439')
2025-03-20 18:58:06,893 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,893 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/9 (ordered; batch not supported)] ('explorer', 'Искатель', 'Посетить все разделы бота', '🔍', 0, 0, '2025-03-20 16:58:06.891439')
2025-03-20 18:58:06,894 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,894 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/9 (ordered; batch not supported)] ('legend', 'Легенда', 'Купить премиум статус', '⭐', 0, 0, '2025-03-20 16:58:06.891439')
2025-03-20 18:58:06,895 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,895 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 5/9 (ordered; batch not supported)] ('leprechaun', 'Лепрекон', 'Накопить 15,000 монет в балансе', '🍀', 0, 0, '2025-03-20 16:58:06.891439')
2025-03-20 18:58:06,895 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,895 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 6/9 (ordered; batch not supported)] ('lucky', 'Испытать удачу', 'Принять участие в розыгрыше монет', '🎁', 0, 0, '2025-03-20 16:58:06.891439')
2025-03-20 18:58:06,895 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,895 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 7/9 (ordered; batch not supported)] ('business', 'Бизнес-мачо', 'Пригласить человека по реферальной ссылке', '💼', 0, 0, '2025-03-20 16:58:06.891439')
2025-03-20 18:58:06,896 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,896 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 8/9 (ordered; batch not supported)] ('follow_me', 'Делай как я', 'Пригласить 10 человек по реферальной ссылке', '👑', 0, 0, '2025-03-20 16:58:06.891439')
2025-03-20 18:58:06,896 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:06,896 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 9/9 (ordered; batch not supported)] ('friend', 'Настоящий друг', 'Пригласить 25 человек по реферальной ссылке', '❤️', 0, 0, '2025-03-20 16:58:06.891439')
2025-03-20 18:58:06,897 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:58:06,900 - root - INFO - Achievements handlers registered successfully
2025-03-20 18:58:07,029 - aiogram - INFO - Bot: Бубсер Поиск Бот [@Bubser_PoiskBot]
2025-03-20 18:58:07,115 - aiogram - WARNING - Updates were skipped successfully.
2025-03-20 18:58:07,116 - __main__ - INFO - Бот успешно запущен!
2025-03-20 18:58:07,118 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:07,120 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.tg_id, users.username, users.first_name, users.is_premium, users.premium_end_date, users.crystals, users.language, users.blocked, users.last_gift, users.created_at, users.updated_at, users.coins, users.premium_until 
FROM users 
WHERE users.is_premium = 1 AND users.premium_end_date <= ?
2025-03-20 18:58:07,120 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('2025-03-20 18:58:07.116472',)
2025-03-20 18:58:07,121 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:58:07,122 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-03-20 18:58:08,102 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-03-20 18:58:08,103 - aiogram - WARNING - Goodbye!
2025-03-20 18:58:11,822 - __main__ - INFO - Запуск бота...
2025-03-20 18:58:12,141 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:12,142 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("users")
2025-03-20 18:58:12,143 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,144 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("users")
2025-03-20 18:58:12,145 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,145 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("referrals")
2025-03-20 18:58:12,145 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,145 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("referrals")
2025-03-20 18:58:12,146 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,146 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("announcements")
2025-03-20 18:58:12,146 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,146 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("announcements")
2025-03-20 18:58:12,146 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,146 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("reports")
2025-03-20 18:58:12,146 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,148 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("reports")
2025-03-20 18:58:12,148 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,148 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("favorites")
2025-03-20 18:58:12,149 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,149 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("favorites")
2025-03-20 18:58:12,149 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,149 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("crystal_transactions")
2025-03-20 18:58:12,149 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,150 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("crystal_transactions")
2025-03-20 18:58:12,150 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,151 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("premium_prices")
2025-03-20 18:58:12,151 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,151 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("premium_prices")
2025-03-20 18:58:12,152 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,152 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("sponsors")
2025-03-20 18:58:12,152 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,152 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("sponsors")
2025-03-20 18:58:12,152 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,152 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_sponsor_subscriptions")
2025-03-20 18:58:12,153 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,153 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_sponsor_subscriptions")
2025-03-20 18:58:12,153 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,153 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_codes")
2025-03-20 18:58:12,153 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,154 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("promo_codes")
2025-03-20 18:58:12,154 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,154 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("promo_uses")
2025-03-20 18:58:12,154 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,154 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("promo_uses")
2025-03-20 18:58:12,154 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,154 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("achievements")
2025-03-20 18:58:12,154 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,155 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("achievements")
2025-03-20 18:58:12,155 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,155 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_achievements")
2025-03-20 18:58:12,155 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,155 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_achievements")
2025-03-20 18:58:12,155 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,155 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_visited_sections")
2025-03-20 18:58:12,155 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,157 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_visited_sections")
2025-03-20 18:58:12,157 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,158 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("user_secret_purchases")
2025-03-20 18:58:12,158 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,159 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("user_secret_purchases")
2025-03-20 18:58:12,159 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,159 - sqlalchemy.engine.Engine - INFO - PRAGMA main.table_info("bot_settings")
2025-03-20 18:58:12,160 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,160 - sqlalchemy.engine.Engine - INFO - PRAGMA temp.table_info("bot_settings")
2025-03-20 18:58:12,160 - sqlalchemy.engine.Engine - INFO - [raw sql] ()
2025-03-20 18:58:12,162 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE users (
	id INTEGER NOT NULL, 
	tg_id INTEGER NOT NULL, 
	username VARCHAR, 
	first_name VARCHAR, 
	is_premium BOOLEAN, 
	premium_end_date DATETIME, 
	crystals INTEGER, 
	language VARCHAR, 
	blocked BOOLEAN, 
	last_gift DATETIME, 
	created_at DATETIME, 
	updated_at DATETIME, 
	coins INTEGER, 
	premium_until DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (tg_id)
)


2025-03-20 18:58:12,162 - sqlalchemy.engine.Engine - INFO - [no key 0.00047s] ()
2025-03-20 18:58:12,166 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_users_id ON users (id)
2025-03-20 18:58:12,166 - sqlalchemy.engine.Engine - INFO - [no key 0.00043s] ()
2025-03-20 18:58:12,169 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE referrals (
	id INTEGER NOT NULL, 
	referrer_id INTEGER NOT NULL, 
	referred_id INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (referred_id)
)


2025-03-20 18:58:12,169 - sqlalchemy.engine.Engine - INFO - [no key 0.00041s] ()
2025-03-20 18:58:12,173 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_referrals_id ON referrals (id)
2025-03-20 18:58:12,174 - sqlalchemy.engine.Engine - INFO - [no key 0.00054s] ()
2025-03-20 18:58:12,178 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE premium_prices (
	id INTEGER NOT NULL, 
	duration_days INTEGER NOT NULL, 
	price FLOAT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (duration_days)
)


2025-03-20 18:58:12,179 - sqlalchemy.engine.Engine - INFO - [no key 0.00161s] ()
2025-03-20 18:58:12,183 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_premium_prices_id ON premium_prices (id)
2025-03-20 18:58:12,183 - sqlalchemy.engine.Engine - INFO - [no key 0.00033s] ()
2025-03-20 18:58:12,187 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE sponsors (
	id INTEGER NOT NULL, 
	name VARCHAR NOT NULL, 
	link VARCHAR NOT NULL, 
	channel_id VARCHAR, 
	reward INTEGER, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id)
)


2025-03-20 18:58:12,187 - sqlalchemy.engine.Engine - INFO - [no key 0.00059s] ()
2025-03-20 18:58:12,192 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_sponsors_id ON sponsors (id)
2025-03-20 18:58:12,193 - sqlalchemy.engine.Engine - INFO - [no key 0.00090s] ()
2025-03-20 18:58:12,195 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE promo_codes (
	id INTEGER NOT NULL, 
	code VARCHAR NOT NULL, 
	duration_days INTEGER NOT NULL, 
	max_uses INTEGER, 
	uses_count INTEGER, 
	is_active BOOLEAN, 
	created_at DATETIME, 
	expires_at DATETIME, 
	PRIMARY KEY (id)
)


2025-03-20 18:58:12,195 - sqlalchemy.engine.Engine - INFO - [no key 0.00048s] ()
2025-03-20 18:58:12,200 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_promo_codes_id ON promo_codes (id)
2025-03-20 18:58:12,200 - sqlalchemy.engine.Engine - INFO - [no key 0.00041s] ()
2025-03-20 18:58:12,203 - sqlalchemy.engine.Engine - INFO - CREATE UNIQUE INDEX ix_promo_codes_code ON promo_codes (code)
2025-03-20 18:58:12,203 - sqlalchemy.engine.Engine - INFO - [no key 0.00022s] ()
2025-03-20 18:58:12,206 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE achievements (
	id INTEGER NOT NULL, 
	"key" VARCHAR NOT NULL, 
	name VARCHAR NOT NULL, 
	description VARCHAR NOT NULL, 
	icon VARCHAR, 
	is_purchasable BOOLEAN, 
	price INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE ("key")
)


2025-03-20 18:58:12,207 - sqlalchemy.engine.Engine - INFO - [no key 0.00060s] ()
2025-03-20 18:58:12,209 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_achievements_id ON achievements (id)
2025-03-20 18:58:12,210 - sqlalchemy.engine.Engine - INFO - [no key 0.00024s] ()
2025-03-20 18:58:12,212 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE bot_settings (
	id INTEGER NOT NULL, 
	"key" VARCHAR NOT NULL, 
	value VARCHAR, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE ("key")
)


2025-03-20 18:58:12,213 - sqlalchemy.engine.Engine - INFO - [no key 0.00098s] ()
2025-03-20 18:58:12,216 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE announcements (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	announcement_type VARCHAR(4) NOT NULL, 
	image_id VARCHAR NOT NULL, 
	media_id VARCHAR, 
	media_type VARCHAR, 
	description TEXT NOT NULL, 
	keyword VARCHAR, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:58:12,216 - sqlalchemy.engine.Engine - INFO - [no key 0.00046s] ()
2025-03-20 18:58:12,223 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_announcements_id ON announcements (id)
2025-03-20 18:58:12,226 - sqlalchemy.engine.Engine - INFO - [no key 0.00290s] ()
2025-03-20 18:58:12,232 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE crystal_transactions (
	id INTEGER NOT NULL, 
	sender_id INTEGER, 
	receiver_id INTEGER, 
	amount INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(sender_id) REFERENCES users (id), 
	FOREIGN KEY(receiver_id) REFERENCES users (id)
)


2025-03-20 18:58:12,232 - sqlalchemy.engine.Engine - INFO - [no key 0.00051s] ()
2025-03-20 18:58:12,235 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_crystal_transactions_id ON crystal_transactions (id)
2025-03-20 18:58:12,236 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2025-03-20 18:58:12,238 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_sponsor_subscriptions (
	id INTEGER NOT NULL, 
	user_tg_id INTEGER NOT NULL, 
	sponsor_id INTEGER NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_tg_id) REFERENCES users (tg_id), 
	FOREIGN KEY(sponsor_id) REFERENCES sponsors (id)
)


2025-03-20 18:58:12,238 - sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
2025-03-20 18:58:12,243 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE promo_uses (
	id INTEGER NOT NULL, 
	promo_id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	used_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(promo_id) REFERENCES promo_codes (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:58:12,243 - sqlalchemy.engine.Engine - INFO - [no key 0.00043s] ()
2025-03-20 18:58:12,246 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_promo_uses_id ON promo_uses (id)
2025-03-20 18:58:12,246 - sqlalchemy.engine.Engine - INFO - [no key 0.00035s] ()
2025-03-20 18:58:12,250 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_achievements (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	achievement_id INTEGER NOT NULL, 
	achieved_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	FOREIGN KEY(achievement_id) REFERENCES achievements (id)
)


2025-03-20 18:58:12,250 - sqlalchemy.engine.Engine - INFO - [no key 0.00038s] ()
2025-03-20 18:58:12,253 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_achievements_id ON user_achievements (id)
2025-03-20 18:58:12,253 - sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
2025-03-20 18:58:12,257 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_visited_sections (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	section VARCHAR NOT NULL, 
	visited_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:58:12,258 - sqlalchemy.engine.Engine - INFO - [no key 0.00036s] ()
2025-03-20 18:58:12,260 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_visited_sections_id ON user_visited_sections (id)
2025-03-20 18:58:12,260 - sqlalchemy.engine.Engine - INFO - [no key 0.00027s] ()
2025-03-20 18:58:12,265 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE user_secret_purchases (
	id INTEGER NOT NULL, 
	user_id INTEGER NOT NULL, 
	content_key VARCHAR NOT NULL, 
	purchased_at DATETIME, 
	price INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id)
)


2025-03-20 18:58:12,265 - sqlalchemy.engine.Engine - INFO - [no key 0.00054s] ()
2025-03-20 18:58:12,269 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_user_secret_purchases_id ON user_secret_purchases (id)
2025-03-20 18:58:12,269 - sqlalchemy.engine.Engine - INFO - [no key 0.00026s] ()
2025-03-20 18:58:12,272 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE reports (
	id INTEGER NOT NULL, 
	reporter_id INTEGER, 
	announcement_id INTEGER, 
	reason VARCHAR NOT NULL, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(reporter_id) REFERENCES users (id), 
	FOREIGN KEY(announcement_id) REFERENCES announcements (id)
)


2025-03-20 18:58:12,272 - sqlalchemy.engine.Engine - INFO - [no key 0.00032s] ()
2025-03-20 18:58:12,275 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_reports_id ON reports (id)
2025-03-20 18:58:12,276 - sqlalchemy.engine.Engine - INFO - [no key 0.00047s] ()
2025-03-20 18:58:12,279 - sqlalchemy.engine.Engine - INFO - 
CREATE TABLE favorites (
	id INTEGER NOT NULL, 
	user_id INTEGER, 
	announcement_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (id), 
	FOREIGN KEY(announcement_id) REFERENCES announcements (id)
)


2025-03-20 18:58:12,279 - sqlalchemy.engine.Engine - INFO - [no key 0.00034s] ()
2025-03-20 18:58:12,282 - sqlalchemy.engine.Engine - INFO - CREATE INDEX ix_favorites_id ON favorites (id)
2025-03-20 18:58:12,283 - sqlalchemy.engine.Engine - INFO - [no key 0.00099s] ()
2025-03-20 18:58:12,286 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:58:12,306 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:12,311 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:12,311 - sqlalchemy.engine.Engine - INFO - [generated in 0.00061s] (30, 1, 0)
2025-03-20 18:58:12,313 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:12,313 - sqlalchemy.engine.Engine - INFO - [cached since 0.002369s ago] (180, 1, 0)
2025-03-20 18:58:12,314 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:12,314 - sqlalchemy.engine.Engine - INFO - [cached since 0.003345s ago] (365, 1, 0)
2025-03-20 18:58:12,315 - sqlalchemy.engine.Engine - INFO - SELECT premium_prices.id AS premium_prices_id, premium_prices.duration_days AS premium_prices_duration_days, premium_prices.price AS premium_prices_price, premium_prices.created_at AS premium_prices_created_at, premium_prices.updated_at AS premium_prices_updated_at 
FROM premium_prices 
WHERE premium_prices.duration_days = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:12,315 - sqlalchemy.engine.Engine - INFO - [cached since 0.004438s ago] (36500, 1, 0)
2025-03-20 18:58:12,318 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,318 - sqlalchemy.engine.Engine - INFO - [generated in 0.00024s (insertmanyvalues) 1/4 (ordered; batch not supported)] (30, 500.0, '2025-03-20 16:58:12.318672', '2025-03-20 16:58:12.318672')
2025-03-20 18:58:12,320 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,320 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/4 (ordered; batch not supported)] (180, 2500.0, '2025-03-20 16:58:12.318672', '2025-03-20 16:58:12.318672')
2025-03-20 18:58:12,320 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,320 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/4 (ordered; batch not supported)] (365, 4500.0, '2025-03-20 16:58:12.318672', '2025-03-20 16:58:12.318672')
2025-03-20 18:58:12,320 - sqlalchemy.engine.Engine - INFO - INSERT INTO premium_prices (duration_days, price, created_at, updated_at) VALUES (?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,321 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/4 (ordered; batch not supported)] (36500, 9900.0, '2025-03-20 16:58:12.318672', '2025-03-20 16:58:12.318672')
2025-03-20 18:58:12,321 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:58:12,337 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:12,342 - sqlalchemy.engine.Engine - INFO - SELECT count(*) AS count_1 
FROM (SELECT achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM achievements) AS anon_1
2025-03-20 18:58:12,343 - sqlalchemy.engine.Engine - INFO - [generated in 0.00058s] ()
2025-03-20 18:58:12,346 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:58:12,346 - sqlalchemy.engine.Engine - INFO - [generated in 0.00043s] ('major', 'Мажор', 'Доказательство вашей финансовой состоятельности', '💰', 1, 10000, '2025-03-20 16:58:12.346392')
2025-03-20 18:58:12,347 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,348 - sqlalchemy.engine.Engine - INFO - [generated in 0.00017s (insertmanyvalues) 1/9 (ordered; batch not supported)] ('popular', 'Популярный', 'Добавить объявление по поиску команды', '👥', 0, 0, '2025-03-20 16:58:12.347599')
2025-03-20 18:58:12,348 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,348 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 2/9 (ordered; batch not supported)] ('club_fighter', 'Бойцовский клуб', 'Добавить объявление по поиску клуба', '🥊', 0, 0, '2025-03-20 16:58:12.347599')
2025-03-20 18:58:12,348 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,348 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 3/9 (ordered; batch not supported)] ('explorer', 'Искатель', 'Посетить все разделы бота', '🔍', 0, 0, '2025-03-20 16:58:12.347599')
2025-03-20 18:58:12,349 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,349 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 4/9 (ordered; batch not supported)] ('legend', 'Легенда', 'Купить премиум статус', '⭐', 0, 0, '2025-03-20 16:58:12.347599')
2025-03-20 18:58:12,349 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,349 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 5/9 (ordered; batch not supported)] ('leprechaun', 'Лепрекон', 'Накопить 15,000 монет в балансе', '🍀', 0, 0, '2025-03-20 16:58:12.347599')
2025-03-20 18:58:12,349 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,349 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 6/9 (ordered; batch not supported)] ('lucky', 'Испытать удачу', 'Принять участие в розыгрыше монет', '🎁', 0, 0, '2025-03-20 16:58:12.347599')
2025-03-20 18:58:12,350 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,350 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 7/9 (ordered; batch not supported)] ('business', 'Бизнес-мачо', 'Пригласить человека по реферальной ссылке', '💼', 0, 0, '2025-03-20 16:58:12.347599')
2025-03-20 18:58:12,350 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,350 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 8/9 (ordered; batch not supported)] ('follow_me', 'Делай как я', 'Пригласить 10 человек по реферальной ссылке', '👑', 0, 0, '2025-03-20 16:58:12.347599')
2025-03-20 18:58:12,350 - sqlalchemy.engine.Engine - INFO - INSERT INTO achievements ("key", name, description, icon, is_purchasable, price, created_at) VALUES (?, ?, ?, ?, ?, ?, ?) RETURNING id
2025-03-20 18:58:12,351 - sqlalchemy.engine.Engine - INFO - [insertmanyvalues 9/9 (ordered; batch not supported)] ('friend', 'Настоящий друг', 'Пригласить 25 человек по реферальной ссылке', '❤️', 0, 0, '2025-03-20 16:58:12.347599')
2025-03-20 18:58:12,351 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:58:12,356 - root - INFO - Achievements handlers registered successfully
2025-03-20 18:58:12,489 - aiogram - INFO - Bot: Бубсер Поиск Бот [@Bubser_PoiskBot]
2025-03-20 18:58:12,568 - aiogram - WARNING - Updates were skipped successfully.
2025-03-20 18:58:12,568 - __main__ - INFO - Бот успешно запущен!
2025-03-20 18:58:12,569 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:12,573 - sqlalchemy.engine.Engine - INFO - SELECT users.id, users.tg_id, users.username, users.first_name, users.is_premium, users.premium_end_date, users.crystals, users.language, users.blocked, users.last_gift, users.created_at, users.updated_at, users.coins, users.premium_until 
FROM users 
WHERE users.is_premium = 1 AND users.premium_end_date <= ?
2025-03-20 18:58:12,605 - sqlalchemy.engine.Engine - INFO - [generated in 0.03261s] ('2025-03-20 18:58:12.568163',)
2025-03-20 18:58:12,611 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:58:12,612 - aiogram.dispatcher.dispatcher - INFO - Start polling.
2025-03-20 18:58:34,928 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:34,930 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:34,930 - sqlalchemy.engine.Engine - INFO - [generated in 0.00040s] (7115599761, 1, 0)
2025-03-20 18:58:34,931 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:34,931 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:34,932 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:34,932 - sqlalchemy.engine.Engine - INFO - [cached since 0.002107s ago] (7115599761, 1, 0)
2025-03-20 18:58:34,932 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:34,933 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:34,935 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:34,935 - sqlalchemy.engine.Engine - INFO - [generated in 0.00048s] (7115599761, 1, 0)
2025-03-20 18:58:34,936 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:34,936 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:34,937 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:34,937 - sqlalchemy.engine.Engine - INFO - [cached since 0.002328s ago] (7115599761, 1, 0)
2025-03-20 18:58:34,938 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:34,938 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:34,939 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:34,939 - sqlalchemy.engine.Engine - INFO - [cached since 0.004154s ago] (7115599761, 1, 0)
2025-03-20 18:58:34,939 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:34,940 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:34,940 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:34,940 - sqlalchemy.engine.Engine - INFO - [cached since 0.005651s ago] (7115599761, 1, 0)
2025-03-20 18:58:34,942 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:34,942 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:34,942 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:34,943 - sqlalchemy.engine.Engine - INFO - [cached since 0.007982s ago] (7115599761, 1, 0)
2025-03-20 18:58:34,944 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (tg_id, username, first_name, is_premium, premium_end_date, crystals, language, blocked, last_gift, created_at, updated_at, coins, premium_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:58:34,944 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (7115599761, 'hhhsleep', 'zzzsleep', 0, None, 100, 'ru', 0, None, '2025-03-20 18:58:34.943569', '2025-03-20 16:58:34.944564', 0, None)
2025-03-20 18:58:34,945 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:58:35,756 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:35,757 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:35,757 - sqlalchemy.engine.Engine - INFO - [cached since 0.8273s ago] (7115599761, 1, 0)
2025-03-20 18:58:35,758 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:35,759 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:35,759 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:35,760 - sqlalchemy.engine.Engine - INFO - [cached since 0.8297s ago] (7115599761, 1, 0)
2025-03-20 18:58:35,761 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:35,762 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:35,763 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:35,763 - sqlalchemy.engine.Engine - INFO - [cached since 0.8284s ago] (7115599761, 1, 0)
2025-03-20 18:58:35,764 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:36,899 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:36,900 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:36,901 - sqlalchemy.engine.Engine - INFO - [cached since 1.97s ago] (7115599761, 1, 0)
2025-03-20 18:58:36,902 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:36,904 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:36,904 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:36,905 - sqlalchemy.engine.Engine - INFO - [cached since 1.975s ago] (7115599761, 1, 0)
2025-03-20 18:58:36,905 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:36,906 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:36,907 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:36,907 - sqlalchemy.engine.Engine - INFO - [cached since 1.972s ago] (7115599761, 1, 0)
2025-03-20 18:58:36,908 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:37,026 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:37,027 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:37,028 - sqlalchemy.engine.Engine - INFO - [cached since 2.093s ago] (7115599761, 1, 0)
2025-03-20 18:58:37,033 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:37,033 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:37,034 - sqlalchemy.engine.Engine - INFO - [cached since 2.099s ago] (7115599761, 1, 0)
2025-03-20 18:58:37,040 - sqlalchemy.engine.Engine - INFO - SELECT user_achievements.id AS user_achievements_id, user_achievements.user_id AS user_achievements_user_id, user_achievements.achievement_id AS user_achievements_achievement_id, user_achievements.achieved_at AS user_achievements_achieved_at, achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM user_achievements JOIN achievements ON user_achievements.achievement_id = achievements.id 
WHERE user_achievements.user_id = ?
2025-03-20 18:58:37,041 - sqlalchemy.engine.Engine - INFO - [generated in 0.00118s] (1,)
2025-03-20 18:58:37,042 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:37,042 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:37,043 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:37,043 - sqlalchemy.engine.Engine - INFO - [cached since 2.108s ago] (7115599761, 1, 0)
2025-03-20 18:58:37,043 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:37,044 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:43,182 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:43,182 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:43,182 - sqlalchemy.engine.Engine - INFO - [cached since 8.252s ago] (7115599761, 1, 0)
2025-03-20 18:58:43,185 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:43,195 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:43,195 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:43,196 - sqlalchemy.engine.Engine - INFO - [cached since 8.265s ago] (7115599761, 1, 0)
2025-03-20 18:58:43,196 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:43,197 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:43,197 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:43,198 - sqlalchemy.engine.Engine - INFO - [cached since 8.263s ago] (7115599761, 1, 0)
2025-03-20 18:58:43,199 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:47,449 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:47,449 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:47,450 - sqlalchemy.engine.Engine - INFO - [cached since 12.52s ago] (7115599761, 1, 0)
2025-03-20 18:58:47,450 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:47,451 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:47,451 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:47,451 - sqlalchemy.engine.Engine - INFO - [cached since 12.52s ago] (7115599761, 1, 0)
2025-03-20 18:58:47,452 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:47,452 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:47,452 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:47,453 - sqlalchemy.engine.Engine - INFO - [cached since 12.52s ago] (7115599761, 1, 0)
2025-03-20 18:58:47,453 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:47,617 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:47,617 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:47,618 - sqlalchemy.engine.Engine - INFO - [cached since 12.68s ago] (7115599761, 1, 0)
2025-03-20 18:58:47,620 - sqlalchemy.engine.Engine - INFO - SELECT user_visited_sections.id AS user_visited_sections_id, user_visited_sections.user_id AS user_visited_sections_user_id, user_visited_sections.section AS user_visited_sections_section, user_visited_sections.visited_at AS user_visited_sections_visited_at 
FROM user_visited_sections 
WHERE user_visited_sections.user_id = ? AND user_visited_sections.section = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:47,620 - sqlalchemy.engine.Engine - INFO - [generated in 0.00051s] (1, 'search_team_menu', 1, 0)
2025-03-20 18:58:47,623 - sqlalchemy.engine.Engine - INFO - INSERT INTO user_visited_sections (user_id, section, visited_at) VALUES (?, ?, ?)
2025-03-20 18:58:47,625 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] (1, 'search_team_menu', '2025-03-20 16:58:47.623933')
2025-03-20 18:58:47,626 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:58:47,630 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:47,631 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
2025-03-20 18:58:47,631 - sqlalchemy.engine.Engine - INFO - [generated in 0.00029s] (1,)
2025-03-20 18:58:47,632 - sqlalchemy.engine.Engine - INFO - SELECT user_visited_sections.section AS user_visited_sections_section 
FROM user_visited_sections 
WHERE user_visited_sections.user_id = ? AND user_visited_sections.section IN (?, ?, ?, ?, ?, ?)
2025-03-20 18:58:47,632 - sqlalchemy.engine.Engine - INFO - [generated in 0.00031s] (1, 'search_team_menu', 'search_club_menu', 'crystals', 'premium', 'additional', 'gift')
2025-03-20 18:58:47,634 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:49,263 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:49,305 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:49,307 - sqlalchemy.engine.Engine - INFO - [cached since 14.38s ago] (7115599761, 1, 0)
2025-03-20 18:58:49,310 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:49,311 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:49,313 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:49,313 - sqlalchemy.engine.Engine - INFO - [cached since 14.38s ago] (7115599761, 1, 0)
2025-03-20 18:58:49,314 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:49,316 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:49,317 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:49,317 - sqlalchemy.engine.Engine - INFO - [cached since 14.38s ago] (7115599761, 1, 0)
2025-03-20 18:58:49,318 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:49,455 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:49,476 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:49,479 - sqlalchemy.engine.Engine - INFO - [cached since 14.54s ago] (7115599761, 1, 0)
2025-03-20 18:58:49,485 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:49,486 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:49,488 - sqlalchemy.engine.Engine - INFO - SELECT announcements.id AS announcements_id, announcements.user_id AS announcements_user_id, announcements.announcement_type AS announcements_announcement_type, announcements.image_id AS announcements_image_id, announcements.media_id AS announcements_media_id, announcements.media_type AS announcements_media_type, announcements.description AS announcements_description, announcements.keyword AS announcements_keyword, announcements.created_at AS announcements_created_at 
FROM announcements 
WHERE announcements.user_id = ? AND announcements.announcement_type = ? ORDER BY announcements.created_at DESC
 LIMIT ? OFFSET ?
2025-03-20 18:58:49,488 - sqlalchemy.engine.Engine - INFO - [generated in 0.00069s] (7115599761, 'team', 2, 0)
2025-03-20 18:58:49,490 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:50,333 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:50,346 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:50,349 - sqlalchemy.engine.Engine - INFO - [cached since 15.42s ago] (7115599761, 1, 0)
2025-03-20 18:58:50,354 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:50,355 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:50,355 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:50,379 - sqlalchemy.engine.Engine - INFO - [cached since 15.45s ago] (7115599761, 1, 0)
2025-03-20 18:58:50,390 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:50,392 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:50,393 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:50,393 - sqlalchemy.engine.Engine - INFO - [cached since 15.46s ago] (7517432356, 1, 0)
2025-03-20 18:58:50,395 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:50,397 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:50,398 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:50,399 - sqlalchemy.engine.Engine - INFO - [cached since 15.46s ago] (7517432356, 1, 0)
2025-03-20 18:58:50,401 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:50,402 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:50,403 - sqlalchemy.engine.Engine - INFO - SELECT announcements.id AS announcements_id, announcements.user_id AS announcements_user_id, announcements.announcement_type AS announcements_announcement_type, announcements.image_id AS announcements_image_id, announcements.media_id AS announcements_media_id, announcements.media_type AS announcements_media_type, announcements.description AS announcements_description, announcements.keyword AS announcements_keyword, announcements.created_at AS announcements_created_at 
FROM announcements 
WHERE announcements.user_id = ? AND announcements.announcement_type = ? ORDER BY announcements.created_at DESC
 LIMIT ? OFFSET ?
2025-03-20 18:58:50,403 - sqlalchemy.engine.Engine - INFO - [cached since 0.9151s ago] (7517432356, 'team', 2, 0)
2025-03-20 18:58:50,404 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:50,405 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:50,406 - sqlalchemy.engine.Engine - INFO - SELECT announcements.id AS announcements_id, announcements.user_id AS announcements_user_id, announcements.announcement_type AS announcements_announcement_type, announcements.image_id AS announcements_image_id, announcements.media_id AS announcements_media_id, announcements.media_type AS announcements_media_type, announcements.description AS announcements_description, announcements.keyword AS announcements_keyword, announcements.created_at AS announcements_created_at 
FROM announcements 
WHERE announcements.user_id = ? AND announcements.announcement_type = ? ORDER BY announcements.created_at DESC
 LIMIT ? OFFSET ?
2025-03-20 18:58:50,407 - sqlalchemy.engine.Engine - INFO - [cached since 0.9195s ago] (7517432356, 'team', 2, 0)
2025-03-20 18:58:50,408 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:50,410 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:50,410 - sqlalchemy.engine.Engine - INFO - SELECT announcements.id AS announcements_id, announcements.user_id AS announcements_user_id, announcements.announcement_type AS announcements_announcement_type, announcements.image_id AS announcements_image_id, announcements.media_id AS announcements_media_id, announcements.media_type AS announcements_media_type, announcements.description AS announcements_description, announcements.keyword AS announcements_keyword, announcements.created_at AS announcements_created_at 
FROM announcements 
WHERE announcements.user_id = ? AND announcements.announcement_type = ? ORDER BY announcements.created_at DESC
 LIMIT ? OFFSET ?
2025-03-20 18:58:50,411 - sqlalchemy.engine.Engine - INFO - [cached since 0.9231s ago] (7517432356, 'club', 2, 0)
2025-03-20 18:58:50,412 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:52,577 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:52,578 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:52,578 - sqlalchemy.engine.Engine - INFO - [cached since 17.65s ago] (7115599761, 1, 0)
2025-03-20 18:58:52,580 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:58:52,582 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:58:52,583 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:58:52,610 - sqlalchemy.engine.Engine - INFO - [cached since 17.68s ago] (7115599761, 1, 0)
2025-03-20 18:58:52,611 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:08,591 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:08,592 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:08,592 - sqlalchemy.engine.Engine - INFO - [cached since 33.66s ago] (7115599761, 1, 0)
2025-03-20 18:59:08,593 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:08,594 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:08,594 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:08,594 - sqlalchemy.engine.Engine - INFO - [cached since 33.66s ago] (7115599761, 1, 0)
2025-03-20 18:59:08,595 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:08,596 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:08,597 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:08,597 - sqlalchemy.engine.Engine - INFO - [cached since 33.66s ago] (7115599761, 1, 0)
2025-03-20 18:59:08,597 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:08,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:08,598 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:08,598 - sqlalchemy.engine.Engine - INFO - [cached since 33.66s ago] (7115599761, 1, 0)
2025-03-20 18:59:08,599 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:08,600 - handlers.announcement - INFO - Получено фото от user=7115599761
2025-03-20 18:59:08,601 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:08,601 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:08,602 - sqlalchemy.engine.Engine - INFO - [cached since 33.67s ago] (7115599761, 1, 0)
2025-03-20 18:59:08,602 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:10,735 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:10,735 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:10,737 - sqlalchemy.engine.Engine - INFO - [cached since 35.81s ago] (7115599761, 1, 0)
2025-03-20 18:59:10,739 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:10,740 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:10,741 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:10,741 - sqlalchemy.engine.Engine - INFO - [cached since 35.81s ago] (7115599761, 1, 0)
2025-03-20 18:59:10,742 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:17,974 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:17,975 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:17,975 - sqlalchemy.engine.Engine - INFO - [cached since 43.05s ago] (7139312538, 1, 0)
2025-03-20 18:59:17,978 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:17,979 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:17,980 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:17,980 - sqlalchemy.engine.Engine - INFO - [cached since 43.05s ago] (7139312538, 1, 0)
2025-03-20 18:59:17,980 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:17,981 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:17,982 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:18,000 - sqlalchemy.engine.Engine - INFO - [cached since 43.06s ago] (7139312538, 1, 0)
2025-03-20 18:59:18,001 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:18,002 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:18,004 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:18,006 - sqlalchemy.engine.Engine - INFO - [cached since 43.07s ago] (7139312538, 1, 0)
2025-03-20 18:59:18,007 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:20,008 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:20,008 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:20,009 - sqlalchemy.engine.Engine - INFO - [cached since 45.08s ago] (7139312538, 1, 0)
2025-03-20 18:59:20,011 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:20,013 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:20,013 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:20,013 - sqlalchemy.engine.Engine - INFO - [cached since 45.08s ago] (7139312538, 1, 0)
2025-03-20 18:59:20,014 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:20,014 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:20,015 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:20,015 - sqlalchemy.engine.Engine - INFO - [cached since 45.08s ago] (7139312538, 1, 0)
2025-03-20 18:59:20,018 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:20,205 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:20,206 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:20,206 - sqlalchemy.engine.Engine - INFO - [cached since 45.27s ago] (7139312538, 1, 0)
2025-03-20 18:59:20,210 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:20,368 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:20,371 - sqlalchemy.engine.Engine - INFO - SELECT sponsors.id AS sponsors_id, sponsors.name AS sponsors_name, sponsors.link AS sponsors_link, sponsors.channel_id AS sponsors_channel_id, sponsors.reward AS sponsors_reward, sponsors.is_active AS sponsors_is_active, sponsors.created_at AS sponsors_created_at, sponsors.updated_at AS sponsors_updated_at 
FROM sponsors
2025-03-20 18:59:20,372 - sqlalchemy.engine.Engine - INFO - [generated in 0.00079s] ()
2025-03-20 18:59:20,373 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:21,379 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:21,380 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:21,380 - sqlalchemy.engine.Engine - INFO - [cached since 46.45s ago] (7139312538, 1, 0)
2025-03-20 18:59:21,381 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:21,384 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:21,385 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:21,386 - sqlalchemy.engine.Engine - INFO - [cached since 46.46s ago] (7139312538, 1, 0)
2025-03-20 18:59:21,387 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:21,388 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:21,389 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:21,389 - sqlalchemy.engine.Engine - INFO - [cached since 46.45s ago] (7139312538, 1, 0)
2025-03-20 18:59:21,390 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:23,014 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:23,015 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:23,015 - sqlalchemy.engine.Engine - INFO - [cached since 48.09s ago] (7139312538, 1, 0)
2025-03-20 18:59:23,017 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:23,019 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:23,019 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:23,020 - sqlalchemy.engine.Engine - INFO - [cached since 48.09s ago] (7139312538, 1, 0)
2025-03-20 18:59:23,021 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:23,022 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:23,022 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:23,023 - sqlalchemy.engine.Engine - INFO - [cached since 48.09s ago] (7139312538, 1, 0)
2025-03-20 18:59:23,023 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:23,024 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:23,024 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:23,025 - sqlalchemy.engine.Engine - INFO - [cached since 48.09s ago] (7139312538, 1, 0)
2025-03-20 18:59:23,026 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:27,841 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:27,842 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:27,842 - sqlalchemy.engine.Engine - INFO - [cached since 52.91s ago] (7139312538, 1, 0)
2025-03-20 18:59:27,844 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:27,845 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:27,846 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:27,846 - sqlalchemy.engine.Engine - INFO - [cached since 52.92s ago] (7139312538, 1, 0)
2025-03-20 18:59:27,848 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:27,849 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:27,851 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:27,852 - sqlalchemy.engine.Engine - INFO - [cached since 52.92s ago] (7139312538, 1, 0)
2025-03-20 18:59:27,853 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:27,853 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:27,853 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:27,853 - sqlalchemy.engine.Engine - INFO - [cached since 52.92s ago] (7139312538, 1, 0)
2025-03-20 18:59:27,854 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:32,283 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:32,283 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:32,284 - sqlalchemy.engine.Engine - INFO - [cached since 57.35s ago] (7139312538, 1, 0)
2025-03-20 18:59:32,285 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:32,287 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:32,288 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:32,289 - sqlalchemy.engine.Engine - INFO - [cached since 57.36s ago] (7139312538, 1, 0)
2025-03-20 18:59:32,290 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:32,291 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:32,292 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:32,292 - sqlalchemy.engine.Engine - INFO - [cached since 57.36s ago] (7139312538, 1, 0)
2025-03-20 18:59:32,293 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:32,294 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:32,295 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:32,296 - sqlalchemy.engine.Engine - INFO - [cached since 57.36s ago] (7139312538, 1, 0)
2025-03-20 18:59:32,297 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:34,604 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:34,604 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:34,605 - sqlalchemy.engine.Engine - INFO - [cached since 59.67s ago] (7139312538, 1, 0)
2025-03-20 18:59:34,605 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:34,606 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:34,607 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:34,608 - sqlalchemy.engine.Engine - INFO - [cached since 59.68s ago] (7139312538, 1, 0)
2025-03-20 18:59:34,608 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:34,609 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:34,609 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:34,610 - sqlalchemy.engine.Engine - INFO - [cached since 59.68s ago] (7139312538, 1, 0)
2025-03-20 18:59:34,611 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:34,611 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:34,612 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 18:59:34,612 - sqlalchemy.engine.Engine - INFO - [cached since 59.68s ago] (7139312538, 1, 0)
2025-03-20 18:59:34,613 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 18:59:34,614 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:34,615 - sqlalchemy.engine.Engine - INFO - INSERT INTO sponsors (name, link, channel_id, reward, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)
2025-03-20 18:59:34,615 - sqlalchemy.engine.Engine - INFO - [generated in 0.00041s] ('test', 'https://t.me/obrientest1', '-1002294041672', 10, 1, '2025-03-20 16:59:34.615661', '2025-03-20 16:59:34.615661')
2025-03-20 18:59:34,617 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 18:59:34,713 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 18:59:34,714 - sqlalchemy.engine.Engine - INFO - SELECT sponsors.id AS sponsors_id, sponsors.name AS sponsors_name, sponsors.link AS sponsors_link, sponsors.channel_id AS sponsors_channel_id, sponsors.reward AS sponsors_reward, sponsors.is_active AS sponsors_is_active, sponsors.created_at AS sponsors_created_at, sponsors.updated_at AS sponsors_updated_at 
FROM sponsors
2025-03-20 18:59:34,714 - sqlalchemy.engine.Engine - INFO - [cached since 14.34s ago] ()
2025-03-20 18:59:34,715 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:10,190 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:10,190 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:10,191 - sqlalchemy.engine.Engine - INFO - [cached since 95.26s ago] (7115599761, 1, 0)
2025-03-20 19:00:10,192 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:10,194 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:10,194 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:10,195 - sqlalchemy.engine.Engine - INFO - [cached since 95.26s ago] (7115599761, 1, 0)
2025-03-20 19:00:10,195 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:10,196 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:10,198 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:10,198 - sqlalchemy.engine.Engine - INFO - [cached since 95.26s ago] (7115599761, 1, 0)
2025-03-20 19:00:10,199 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:10,199 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:10,200 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:10,200 - sqlalchemy.engine.Engine - INFO - [cached since 95.27s ago] (7115599761, 1, 0)
2025-03-20 19:00:10,201 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:10,201 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:10,202 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:10,202 - sqlalchemy.engine.Engine - INFO - [cached since 95.27s ago] (7115599761, 1, 0)
2025-03-20 19:00:10,202 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:10,204 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:10,204 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:10,204 - sqlalchemy.engine.Engine - INFO - [cached since 95.27s ago] (7115599761, 1, 0)
2025-03-20 19:00:10,204 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:12,393 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:12,465 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:12,472 - sqlalchemy.engine.Engine - INFO - [cached since 97.54s ago] (7115599761, 1, 0)
2025-03-20 19:00:12,477 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:12,479 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:12,482 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:12,483 - sqlalchemy.engine.Engine - INFO - [cached since 97.55s ago] (7115599761, 1, 0)
2025-03-20 19:00:12,524 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:12,526 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:12,533 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:12,539 - sqlalchemy.engine.Engine - INFO - [cached since 97.6s ago] (7115599761, 1, 0)
2025-03-20 19:00:12,542 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:13,861 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:13,861 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:13,863 - sqlalchemy.engine.Engine - INFO - [cached since 98.93s ago] (7115599761, 1, 0)
2025-03-20 19:00:13,864 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:13,865 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:13,866 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:13,866 - sqlalchemy.engine.Engine - INFO - [cached since 98.94s ago] (7115599761, 1, 0)
2025-03-20 19:00:13,867 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:13,868 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:13,868 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:13,869 - sqlalchemy.engine.Engine - INFO - [cached since 98.93s ago] (7115599761, 1, 0)
2025-03-20 19:00:13,872 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:14,017 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:14,020 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:14,021 - sqlalchemy.engine.Engine - INFO - [cached since 99.09s ago] (7115599761, 1, 0)
2025-03-20 19:00:14,079 - sqlalchemy.engine.Engine - INFO - SELECT user_visited_sections.id AS user_visited_sections_id, user_visited_sections.user_id AS user_visited_sections_user_id, user_visited_sections.section AS user_visited_sections_section, user_visited_sections.visited_at AS user_visited_sections_visited_at 
FROM user_visited_sections 
WHERE user_visited_sections.user_id = ? AND user_visited_sections.section = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:14,081 - sqlalchemy.engine.Engine - INFO - [cached since 86.46s ago] (1, 'gift', 1, 0)
2025-03-20 19:00:14,082 - sqlalchemy.engine.Engine - INFO - INSERT INTO user_visited_sections (user_id, section, visited_at) VALUES (?, ?, ?)
2025-03-20 19:00:14,082 - sqlalchemy.engine.Engine - INFO - [cached since 86.46s ago] (1, 'gift', '2025-03-20 17:00:14.082957')
2025-03-20 19:00:14,087 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 19:00:14,094 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:14,095 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
2025-03-20 19:00:14,095 - sqlalchemy.engine.Engine - INFO - [cached since 86.46s ago] (1,)
2025-03-20 19:00:14,098 - sqlalchemy.engine.Engine - INFO - SELECT user_visited_sections.section AS user_visited_sections_section 
FROM user_visited_sections 
WHERE user_visited_sections.user_id = ? AND user_visited_sections.section IN (?, ?, ?, ?, ?, ?)
2025-03-20 19:00:14,100 - sqlalchemy.engine.Engine - INFO - [cached since 86.47s ago] (1, 'search_team_menu', 'search_club_menu', 'crystals', 'premium', 'additional', 'gift')
2025-03-20 19:00:14,101 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:14,942 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:14,942 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:14,943 - sqlalchemy.engine.Engine - INFO - [cached since 100s ago] (7115599761, 1, 0)
2025-03-20 19:00:14,944 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:14,945 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:14,945 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:14,945 - sqlalchemy.engine.Engine - INFO - [cached since 100s ago] (7115599761, 1, 0)
2025-03-20 19:00:14,946 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:14,947 - handlers.gift - INFO - Пользователь 7115599761 запросил подарок
2025-03-20 19:00:14,947 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:14,948 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:14,948 - sqlalchemy.engine.Engine - INFO - [cached since 100s ago] (7115599761, 1, 0)
2025-03-20 19:00:14,950 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:15,065 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:15,065 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:15,066 - sqlalchemy.engine.Engine - INFO - [cached since 100.1s ago] (7115599761, 1, 0)
2025-03-20 19:00:15,068 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:15,069 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:15,069 - sqlalchemy.engine.Engine - INFO - [cached since 100.1s ago] (7115599761, 1, 0)
2025-03-20 19:00:15,071 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:15,072 - handlers.gift - INFO - Пользователь 7115599761 премиум: False
2025-03-20 19:00:15,072 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:15,075 - sqlalchemy.engine.Engine - INFO - SELECT sponsors.id AS sponsors_id, sponsors.name AS sponsors_name, sponsors.link AS sponsors_link, sponsors.channel_id AS sponsors_channel_id, sponsors.reward AS sponsors_reward, sponsors.is_active AS sponsors_is_active, sponsors.created_at AS sponsors_created_at, sponsors.updated_at AS sponsors_updated_at 
FROM sponsors 
WHERE sponsors.is_active = 1
2025-03-20 19:00:15,076 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] ()
2025-03-20 19:00:15,077 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:15,078 - handlers.gift - INFO - Найдено активных спонсоров: 1
2025-03-20 19:00:15,078 - handlers.gift - INFO - Проверка подписки пользователя 7115599761 на спонсора test (ID: 1)
2025-03-20 19:00:15,078 - utils.helpers - INFO - Проверка подписки пользователя 7115599761 на канал -1002294041672
2025-03-20 19:00:15,203 - utils.helpers - INFO - Статус подписки пользователя 7115599761 на канал -1002294041672: member
2025-03-20 19:00:15,203 - utils.helpers - INFO - Результат проверки подписки: True
2025-03-20 19:00:15,204 - handlers.gift - INFO - Результат проверки подписки на test: True
2025-03-20 19:00:15,205 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:15,208 - sqlalchemy.engine.Engine - INFO - SELECT user_sponsor_subscriptions.id AS user_sponsor_subscriptions_id, user_sponsor_subscriptions.user_tg_id AS user_sponsor_subscriptions_user_tg_id, user_sponsor_subscriptions.sponsor_id AS user_sponsor_subscriptions_sponsor_id, user_sponsor_subscriptions.created_at AS user_sponsor_subscriptions_created_at 
FROM user_sponsor_subscriptions 
WHERE user_sponsor_subscriptions.user_tg_id = ? AND user_sponsor_subscriptions.sponsor_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:15,208 - sqlalchemy.engine.Engine - INFO - [generated in 0.00053s] (7115599761, 1, 1, 0)
2025-03-20 19:00:15,211 - sqlalchemy.engine.Engine - INFO - INSERT INTO user_sponsor_subscriptions (user_tg_id, sponsor_id, created_at) VALUES (?, ?, ?)
2025-03-20 19:00:15,212 - sqlalchemy.engine.Engine - INFO - [generated in 0.00174s] (7115599761, 1, '2025-03-20 17:00:15.211420')
2025-03-20 19:00:15,218 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 19:00:15,223 - handlers.gift - INFO - Добавлена запись о подписке пользователя 7115599761 на спонсора test
2025-03-20 19:00:15,225 - handlers.gift - INFO - Пользователь 7115599761 подписан на всех спонсоров
2025-03-20 19:00:15,225 - handlers.gift - INFO - Вторичная проверка подписок пользователя 7115599761
2025-03-20 19:00:15,226 - utils.helpers - INFO - Проверка подписки пользователя 7115599761 на канал -1002294041672
2025-03-20 19:00:15,268 - utils.helpers - INFO - Статус подписки пользователя 7115599761 на канал -1002294041672: member
2025-03-20 19:00:15,268 - utils.helpers - INFO - Результат проверки подписки: True
2025-03-20 19:00:15,268 - handlers.gift - INFO - Вторичная проверка подписки на test: True
2025-03-20 19:00:15,268 - handlers.gift - INFO - Пользователь 7115599761 прошел вторичную проверку подписок
2025-03-20 19:00:15,268 - handlers.gift - INFO - Выдача подарка пользователю 7115599761: 27 монет
2025-03-20 19:00:15,269 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:15,270 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:15,270 - sqlalchemy.engine.Engine - INFO - [cached since 100.3s ago] (7115599761, 1, 0)
2025-03-20 19:00:15,272 - sqlalchemy.engine.Engine - INFO - UPDATE users SET last_gift=?, updated_at=? WHERE users.id = ?
2025-03-20 19:00:15,273 - sqlalchemy.engine.Engine - INFO - [generated in 0.00127s] ('2025-03-20 19:00:15.271641', '2025-03-20 17:00:15.272641', 1)
2025-03-20 19:00:15,277 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 19:00:15,281 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:15,283 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:15,283 - sqlalchemy.engine.Engine - INFO - [cached since 100.3s ago] (7115599761, 1, 0)
2025-03-20 19:00:15,286 - sqlalchemy.engine.Engine - INFO - UPDATE users SET updated_at=?, coins=? WHERE users.id = ?
2025-03-20 19:00:15,287 - sqlalchemy.engine.Engine - INFO - [generated in 0.00107s] ('2025-03-20 17:00:15.286704', 27, 1)
2025-03-20 19:00:15,290 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 19:00:15,295 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:15,296 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:15,296 - sqlalchemy.engine.Engine - INFO - [cached since 100.4s ago] (7115599761, 1, 0)
2025-03-20 19:00:15,297 - sqlalchemy.engine.Engine - INFO - SELECT achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM achievements 
WHERE achievements."key" = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:15,298 - sqlalchemy.engine.Engine - INFO - [generated in 0.00034s] ('lucky', 1, 0)
2025-03-20 19:00:15,300 - sqlalchemy.engine.Engine - INFO - SELECT user_achievements.id AS user_achievements_id, user_achievements.user_id AS user_achievements_user_id, user_achievements.achievement_id AS user_achievements_achievement_id, user_achievements.achieved_at AS user_achievements_achieved_at 
FROM user_achievements 
WHERE user_achievements.user_id = ? AND user_achievements.achievement_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:15,301 - sqlalchemy.engine.Engine - INFO - [generated in 0.00124s] (1, 7, 1, 0)
2025-03-20 19:00:15,304 - sqlalchemy.engine.Engine - INFO - INSERT INTO user_achievements (user_id, achievement_id, achieved_at) VALUES (?, ?, ?)
2025-03-20 19:00:15,304 - sqlalchemy.engine.Engine - INFO - [generated in 0.00059s] (1, 7, '2025-03-20 17:00:15.304636')
2025-03-20 19:00:15,309 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 19:00:15,441 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:22,652 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:22,652 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:22,653 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:22,654 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:22,655 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:22,657 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:22,657 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:22,658 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:22,658 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:22,659 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:22,659 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:22,659 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:22,660 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:22,661 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:22,662 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:22,663 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:22,665 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:22,665 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:22,665 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:22,666 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:22,666 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:22,667 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:22,668 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:22,669 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:22,671 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:22,671 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:22,671 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:22,672 - sqlalchemy.engine.Engine - INFO - INSERT INTO users (tg_id, username, first_name, is_premium, premium_end_date, crystals, language, blocked, last_gift, created_at, updated_at, coins, premium_until) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-03-20 19:00:22,672 - sqlalchemy.engine.Engine - INFO - [cached since 107.7s ago] (8053357241, 'maksmaksimov12', 'Maks', 0, None, 100, 'ru', 0, None, '2025-03-20 19:00:22.671261', '2025-03-20 17:00:22.672258', 0, None)
2025-03-20 19:00:22,673 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 19:00:24,015 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:24,016 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:24,017 - sqlalchemy.engine.Engine - INFO - [cached since 109.1s ago] (8053357241, 1, 0)
2025-03-20 19:00:24,019 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:24,020 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:24,020 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:24,020 - sqlalchemy.engine.Engine - INFO - [cached since 109.1s ago] (8053357241, 1, 0)
2025-03-20 19:00:24,021 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:24,021 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:24,022 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:24,023 - sqlalchemy.engine.Engine - INFO - [cached since 109.1s ago] (8053357241, 1, 0)
2025-03-20 19:00:24,025 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:25,449 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:25,450 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:25,450 - sqlalchemy.engine.Engine - INFO - [cached since 110.5s ago] (8053357241, 1, 0)
2025-03-20 19:00:25,452 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:25,454 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:25,454 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:25,455 - sqlalchemy.engine.Engine - INFO - [cached since 110.5s ago] (8053357241, 1, 0)
2025-03-20 19:00:25,455 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:25,457 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:25,457 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:25,458 - sqlalchemy.engine.Engine - INFO - [cached since 110.5s ago] (8053357241, 1, 0)
2025-03-20 19:00:25,459 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:25,528 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:25,542 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:25,545 - sqlalchemy.engine.Engine - INFO - [cached since 110.6s ago] (8053357241, 1, 0)
2025-03-20 19:00:25,598 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:25,612 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:25,613 - sqlalchemy.engine.Engine - INFO - [cached since 110.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:25,616 - sqlalchemy.engine.Engine - INFO - SELECT user_achievements.id AS user_achievements_id, user_achievements.user_id AS user_achievements_user_id, user_achievements.achievement_id AS user_achievements_achievement_id, user_achievements.achieved_at AS user_achievements_achieved_at, achievements.id AS achievements_id, achievements."key" AS achievements_key, achievements.name AS achievements_name, achievements.description AS achievements_description, achievements.icon AS achievements_icon, achievements.is_purchasable AS achievements_is_purchasable, achievements.price AS achievements_price, achievements.created_at AS achievements_created_at 
FROM user_achievements JOIN achievements ON user_achievements.achievement_id = achievements.id 
WHERE user_achievements.user_id = ?
2025-03-20 19:00:25,616 - sqlalchemy.engine.Engine - INFO - [cached since 108.6s ago] (2,)
2025-03-20 19:00:25,617 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:25,618 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:25,618 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:25,618 - sqlalchemy.engine.Engine - INFO - [cached since 110.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:25,619 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:25,621 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:26,818 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:26,871 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:26,872 - sqlalchemy.engine.Engine - INFO - [cached since 111.9s ago] (8053357241, 1, 0)
2025-03-20 19:00:26,873 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:26,878 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:26,893 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:26,893 - sqlalchemy.engine.Engine - INFO - [cached since 112s ago] (8053357241, 1, 0)
2025-03-20 19:00:26,894 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:26,895 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:26,910 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:26,914 - sqlalchemy.engine.Engine - INFO - [cached since 112s ago] (8053357241, 1, 0)
2025-03-20 19:00:26,918 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:26,974 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:26,975 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:26,976 - sqlalchemy.engine.Engine - INFO - [cached since 112s ago] (8053357241, 1, 0)
2025-03-20 19:00:26,979 - sqlalchemy.engine.Engine - INFO - SELECT user_visited_sections.id AS user_visited_sections_id, user_visited_sections.user_id AS user_visited_sections_user_id, user_visited_sections.section AS user_visited_sections_section, user_visited_sections.visited_at AS user_visited_sections_visited_at 
FROM user_visited_sections 
WHERE user_visited_sections.user_id = ? AND user_visited_sections.section = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:26,980 - sqlalchemy.engine.Engine - INFO - [cached since 99.36s ago] (2, 'gift', 1, 0)
2025-03-20 19:00:26,982 - sqlalchemy.engine.Engine - INFO - INSERT INTO user_visited_sections (user_id, section, visited_at) VALUES (?, ?, ?)
2025-03-20 19:00:26,982 - sqlalchemy.engine.Engine - INFO - [cached since 99.36s ago] (2, 'gift', '2025-03-20 17:00:26.981196')
2025-03-20 19:00:26,985 - sqlalchemy.engine.Engine - INFO - COMMIT
2025-03-20 19:00:26,990 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:26,991 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
2025-03-20 19:00:26,991 - sqlalchemy.engine.Engine - INFO - [cached since 99.36s ago] (2,)
2025-03-20 19:00:26,993 - sqlalchemy.engine.Engine - INFO - SELECT user_visited_sections.section AS user_visited_sections_section 
FROM user_visited_sections 
WHERE user_visited_sections.user_id = ? AND user_visited_sections.section IN (?, ?, ?, ?, ?, ?)
2025-03-20 19:00:26,994 - sqlalchemy.engine.Engine - INFO - [cached since 99.36s ago] (2, 'search_team_menu', 'search_club_menu', 'crystals', 'premium', 'additional', 'gift')
2025-03-20 19:00:26,995 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:27,545 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:27,545 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:27,546 - sqlalchemy.engine.Engine - INFO - [cached since 112.6s ago] (8053357241, 1, 0)
2025-03-20 19:00:27,547 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:27,549 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:27,550 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:27,550 - sqlalchemy.engine.Engine - INFO - [cached since 112.6s ago] (8053357241, 1, 0)
2025-03-20 19:00:27,552 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:27,552 - handlers.gift - INFO - Пользователь 8053357241 запросил подарок
2025-03-20 19:00:27,553 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:27,554 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:27,554 - sqlalchemy.engine.Engine - INFO - [cached since 112.6s ago] (8053357241, 1, 0)
2025-03-20 19:00:27,558 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:27,611 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:27,611 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:27,611 - sqlalchemy.engine.Engine - INFO - [cached since 112.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:27,614 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:27,614 - sqlalchemy.engine.Engine - INFO - SELECT users.id AS users_id, users.tg_id AS users_tg_id, users.username AS users_username, users.first_name AS users_first_name, users.is_premium AS users_is_premium, users.premium_end_date AS users_premium_end_date, users.crystals AS users_crystals, users.language AS users_language, users.blocked AS users_blocked, users.last_gift AS users_last_gift, users.created_at AS users_created_at, users.updated_at AS users_updated_at, users.coins AS users_coins, users.premium_until AS users_premium_until 
FROM users 
WHERE users.tg_id = ?
 LIMIT ? OFFSET ?
2025-03-20 19:00:27,615 - sqlalchemy.engine.Engine - INFO - [cached since 112.7s ago] (8053357241, 1, 0)
2025-03-20 19:00:27,616 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:27,617 - handlers.gift - INFO - Пользователь 8053357241 премиум: False
2025-03-20 19:00:27,619 - sqlalchemy.engine.Engine - INFO - BEGIN (implicit)
2025-03-20 19:00:27,621 - sqlalchemy.engine.Engine - INFO - SELECT sponsors.id AS sponsors_id, sponsors.name AS sponsors_name, sponsors.link AS sponsors_link, sponsors.channel_id AS sponsors_channel_id, sponsors.reward AS sponsors_reward, sponsors.is_active AS sponsors_is_active, sponsors.created_at AS sponsors_created_at, sponsors.updated_at AS sponsors_updated_at 
FROM sponsors 
WHERE sponsors.is_active = 1
2025-03-20 19:00:27,622 - sqlalchemy.engine.Engine - INFO - [cached since 12.55s ago] ()
2025-03-20 19:00:27,623 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:27,623 - handlers.gift - INFO - Найдено активных спонсоров: 1
2025-03-20 19:00:27,623 - handlers.gift - INFO - Проверка подписки пользователя 8053357241 на спонсора test (ID: 1)
2025-03-20 19:00:27,623 - utils.helpers - INFO - Проверка подписки пользователя 8053357241 на канал -1002294041672
2025-03-20 19:00:27,673 - utils.helpers - INFO - Статус подписки пользователя 8053357241 на канал -1002294041672: left
2025-03-20 19:00:27,673 - utils.helpers - INFO - Результат проверки подписки: False
2025-03-20 19:00:27,674 - handlers.gift - INFO - Результат проверки подписки на test: False
2025-03-20 19:00:27,674 - handlers.gift - INFO - Пользователь 8053357241 не подписан на спонсора test
2025-03-20 19:00:27,674 - handlers.gift - INFO - Пользователь 8053357241 не подписан на всех спонсоров. Неподписанные спонсоры: ['test']
2025-03-20 19:00:27,780 - sqlalchemy.engine.Engine - INFO - ROLLBACK
2025-03-20 19:00:31,310 - aiogram.dispatcher.dispatcher - INFO - Stop polling...
2025-03-20 19:00:31,310 - aiogram - WARNING - Goodbye!
